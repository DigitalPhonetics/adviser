
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://digitalphonetics.github.io/adviser/api/examples/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1, mkdocs-material-5.1.3" name="generator"/>
<title>Examples - Adviser</title>
<link href="../../assets/stylesheets/main.62d34fff.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<link href="../../custom.css" rel="stylesheet"/>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#examples">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Adviser" class="md-header-nav__button md-logo" href="https://digitalphonetics.github.io/adviser/" title="Adviser">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Adviser
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              Examples
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/DigitalPhonetics/adviser/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Adviser" class="md-nav__button md-logo" href="https://digitalphonetics.github.io/adviser/" title="Adviser">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z"></path></svg>
</a>
    Adviser
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/DigitalPhonetics/adviser/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Home">
      Home
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/" title="Getting Started">
      Getting Started
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Reference
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>
</span>
</label>
<nav aria-label="Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</span>
        Reference
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../services/" title="Services">
      Services
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Examples
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="Examples">
      Examples
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples">
    examples
  </a>
<nav aria-label="examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modules">
    Modules
  </a>
<nav aria-label="Modules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples.qa">
    qa
  </a>
<nav aria-label="qa" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modules_1">
    Modules
  </a>
<nav aria-label="Modules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples.qa.worldknowledge">
    worldknowledge
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../resources/" title="Resources">
      Resources
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utils/" title="Utils">
      Utils
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tools/" title="Tools">
      Tools
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Tutorials
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg>
</span>
</label>
<nav aria-label="Tutorials" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</span>
        Tutorials
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/introduction/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/services/" title="Services">
      Services
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/dialogsystem/" title="Dialog System">
      Dialog System
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/advanced/" title="Advanced">
      Advanced
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/" title="FAQ">
      FAQ
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples">
    examples
  </a>
<nav aria-label="examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modules">
    Modules
  </a>
<nav aria-label="Modules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples.qa">
    qa
  </a>
<nav aria-label="qa" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modules_1">
    Modules
  </a>
<nav aria-label="Modules" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adviser.examples.qa.worldknowledge">
    worldknowledge
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/DigitalPhonetics/adviser/edit/master/docs/api/examples.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"></path></svg>
</a>
<h1 id="examples">Examples</h1>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="adviser.examples">
<code>adviser.examples</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<h3 id="modules">Modules</h3>
<div class="doc doc-object doc-module">
<h4 class="doc doc-heading" id="adviser.examples.qa">
<code>adviser.examples.qa</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h4>
<div class="doc doc-contents">
<div class="doc doc-children">
<h5 id="modules_1">Modules</h5>
<div class="doc doc-object doc-module">
<h6 class="doc doc-heading" id="adviser.examples.qa.worldknowledge">
<code>adviser.examples.qa.worldknowledge</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h6>
<div class="doc doc-contents">
<div class="doc doc-children">
<h7>Modules</h7>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="domain" id="adviser.examples.qa.worldknowledge.domain">
<code>adviser.examples.qa.worldknowledge.domain</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="WorldKnowledgeDomain" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain">
<code>adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain</code>
</h0>
<div class="doc doc-contents">
<p>Question answering domain for the world knowledge domain.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">!!! attributes</span>
<span class="err">    artificial_id_counter (int): pseudo identifier for each entry</span>
<span class="err">    name_lex (Dict[str-&gt;str]): lexicon for matching topic's names to their KG entity</span>
</code></pre>
</div>
<div class="doc doc-children">
<h1 id="methods">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>Calls super class' constructor and loads name lexicon</p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>38
39
40
41
42</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Calls super class' constructor and loads name lexicon"""</span>
    <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'CSQA'</span><span class="p">,</span> <span class="s1">'World Knowledge'</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name_lex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_name_lexicon</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">requested_slots</span><span class="o">=&lt;</span><span class="n">tuple_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fa6e0b02f50</span><span class="o">&gt;</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all entities from the data backend that meet the constraints.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>constraints</code></td>
<td><code>dict</code></td>
<td>
<p>slot-value mapping of constraints</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
    <span class="sd">""" Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): slot-value mapping of constraints</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="s1">'relation'</span> <span class="ow">in</span> <span class="n">constraints</span>
    <span class="k">assert</span> <span class="s1">'topic'</span> <span class="ow">in</span> <span class="n">constraints</span>
    <span class="k">assert</span> <span class="s1">'direction'</span> <span class="ow">in</span> <span class="n">constraints</span>

    <span class="n">topics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_topic_entities</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">'topic'</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">topics</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic_label</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
        <span class="n">answer_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'direction'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'out'</span><span class="p">:</span>
            <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_out_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">'relation'</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">'subject'</span><span class="p">:</span> <span class="n">topic_label</span><span class="p">,</span>
                    <span class="s1">'predicate'</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'relation'</span><span class="p">],</span>
                    <span class="s1">'object'</span><span class="p">:</span> <span class="n">answer_id</span>
                <span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_in_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">'relation'</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">'subject'</span><span class="p">:</span> <span class="n">answer_id</span><span class="p">,</span>
                    <span class="s1">'predicate'</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'relation'</span><span class="p">],</span>
                    <span class="s1">'object'</span><span class="p">:</span> <span class="n">topic_label</span>
                <span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">answers</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td><code>str</code></td>
<td>
<p>primary key value of the entity</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>requested_slots</code></td>
<td><code>Iterable</code></td>
<td>
<p>slot-value mapping of constraints</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>126
127
128
129
130
131
132
133
134</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">""" Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    """</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">'should not be called'</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Return the domain name of the current ontology.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>136
137</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_domain_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">"qa"</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all informable slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>147
148
149</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all informable slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'relation'</span><span class="p">,</span> <span class="s1">'topic'</span><span class="p">,</span> <span class="s1">'direction'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all mandatory slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>151
152
153</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all mandatory slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'relation'</span><span class="p">,</span> <span class="s1">'topic'</span><span class="p">,</span> <span class="s1">'direction'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all possible values for an informable slot</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slot</code></td>
<td><code>str</code></td>
<td>
<p>name of the slot</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>List[str]</code></td>
<td>
<p>a list of strings, each string representing one possible value for
the specified slot.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>155
156
157
158
159
160
161
162
163
164
165
166</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">    """</span>
    <span class="c1"># 'assert False, "this method should not be called"'</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">'should not be called'</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the slot name that will be used as the 'name' of an entry </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>168
169
170</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">""" Returns the slot name that will be used as the 'name' of an entry """</span>
    <span class="k">return</span> <span class="s1">'artificial_id'</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the user. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>139
140
141</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the user. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'subject'</span><span class="p">,</span> <span class="s1">'predicate'</span><span class="p">,</span> <span class="s1">'object'</span><span class="p">,</span> <span class="s1">'object_type'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the system. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>143
144
145</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the system. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'relation'</span><span class="p">,</span> <span class="s1">'topic'</span><span class="p">,</span> <span class="s1">'direction'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="multinlg" id="adviser.examples.qa.worldknowledge.multinlg">
<code>adviser.examples.qa.worldknowledge.multinlg</code>
</h8>
<div class="doc doc-contents">
<p>Handcrafted (i.e. template-based) Natural Language Generation Module</p>
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="MultiNLG" id="adviser.examples.qa.worldknowledge.multinlg.MultiNLG">
<code>adviser.examples.qa.worldknowledge.multinlg.MultiNLG</code>
</h0>
<div class="doc doc-contents">
<p>Extension of the handcrafted NLG by allowing multiple system acts.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">This change is necessary for QA, since the policy publishes multiple system acts.</span>
</code></pre>
</div>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="neuralmodels" id="adviser.examples.qa.worldknowledge.neuralmodels">
<code>adviser.examples.qa.worldknowledge.neuralmodels</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Modules</h9>
<div class="doc doc-object doc-module">
<h0 class="doc doc-heading" data-toc-label="director" id="adviser.examples.qa.worldknowledge.neuralmodels.director">
<code>adviser.examples.qa.worldknowledge.neuralmodels.director</code>
</h0>
<div class="doc doc-contents">
<div class="doc doc-children">
<h1 id="classes">Classes</h1>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier">
<code>adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier</code>
</h2>
<div class="doc doc-contents">
<p>Neural network for predicting the relation's direction (outgoing or incoming).</p>
<div class="codehilite">
<pre><span></span><code><span class="n">The</span> <span class="n">model</span> <span class="n">uses</span> <span class="n">a</span> <span class="n">question</span> <span class="n">encoder</span> <span class="k">to</span> <span class="n">classify</span> <span class="n">the</span> <span class="n">question</span> <span class="k">as</span> <span class="n">one</span> <span class="k">of</span> <span class="n">the</span> <span class="n">two</span> <span class="n">classes</span>
<span class="ss">"outgoing"</span> <span class="k">or</span> <span class="ss">"incoming"</span><span class="p">.</span>

<span class="o">!!!</span> <span class="n">attributes</span>
    <span class="n">hidden_dim</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="k">Size</span> <span class="k">of</span> <span class="n">the</span> <span class="n">Bi_LSTM</span><span class="s1">'s hidden layer</span>
<span class="s1">    out_dim (int): Size of the output layer (here: 2)</span>
<span class="s1">    diminisher (nn.Module): Fine-tuning embedding layer, good for reducing Bi-LSTM'</span><span class="n">s</span> <span class="k">size</span>
    <span class="n">lstm</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="n">Bi</span><span class="o">-</span><span class="n">LSTM</span> <span class="k">for</span> <span class="k">encoding</span> <span class="n">a</span> <span class="n">question</span>
    <span class="n">hidden2tag</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="k">Output</span> <span class="n">layer</span>
</code></pre>
</div>
<div class="doc doc-children">
<h3 id="methods_1">Methods</h3>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.__init__">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h4>
<div class="doc doc-contents">
<p>Initialises all required elements of the neural network.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>emb_dim</code></td>
<td><code>int</code></td>
<td>
<p>Output size of the fine-tuning embedding layer</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>lstm_out_dim</code></td>
<td><code>int</code></td>
<td>
<p>Output size of the Bi-LSTM</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>num_classes</code></td>
<td><code>int</code></td>
<td>
<p>Size of the output layer (in this context, always 2)</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/director.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">"""Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        lstm_out_dim: Output size of the Bi-LSTM</span>
<span class="sd">        num_classes: Size of the output layer (in this context, always 2)</span>
<span class="sd">    """</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Classifier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">lstm_out_dim</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span> <span class="o">=</span> <span class="n">num_classes</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">lstm_out_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.forward">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.forward<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> </code>
</h4>
<div class="doc doc-contents">
<p>Application of the neural network on a given input question.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>embeds</code></td>
<td><code>Tensor</code></td>
<td>
<p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Tensor</code></td>
<td>
<p>Probabilities of the two classes "incoming" and "outgoing"</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/director.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">"""Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities of the two classes "incoming" and "outgoing"</span>
<span class="sd">    """</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">tag_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">tag_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">tag_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tag_scores</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h0 class="doc doc-heading" data-toc-label="simpledot" id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot">
<code>adviser.examples.qa.worldknowledge.neuralmodels.simpledot</code>
</h0>
<div class="doc doc-contents">
<div class="doc doc-children">
<h1 id="classes_1">Classes</h1>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot">
<code>adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot</code>
</h2>
<div class="doc doc-contents">
<p>Neural network for predicting the relation of a question.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">The</span> <span class="k">simple</span> <span class="n">dot</span> <span class="n">approach</span> <span class="n">compares</span> <span class="n">a</span> <span class="n">question</span> <span class="k">with</span> <span class="k">each</span> <span class="n">possible</span> <span class="n">relation</span> <span class="n">candidate</span> <span class="k">by</span>
<span class="n">taking</span> <span class="n">the</span> <span class="p">(</span><span class="k">simple</span><span class="p">)</span> <span class="n">dot</span> <span class="n">product</span> <span class="k">between</span> <span class="n">the</span> <span class="n">encoded</span> <span class="n">question</span> <span class="k">and</span> <span class="k">every</span> <span class="n">encoded</span> <span class="n">relation</span><span class="p">.</span>

<span class="o">!!!</span> <span class="n">attributes</span>
    <span class="n">softmax</span> <span class="p">(</span><span class="n">bool</span><span class="p">):</span> <span class="n">whether</span> <span class="k">or</span> <span class="k">not</span> <span class="n">the</span> <span class="n">scores</span> <span class="n">should</span> <span class="n">be</span> <span class="n">converted</span> <span class="k">to</span> <span class="n">probabilities</span>
    <span class="n">hidden</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="k">size</span> <span class="k">of</span> <span class="n">the</span> <span class="n">hidden</span> <span class="n">layer</span>
    <span class="n">relations_tensor</span> <span class="p">(</span><span class="n">torch</span><span class="p">.</span><span class="n">autograd</span><span class="p">.</span><span class="k">Variable</span><span class="p">):</span> <span class="n">embeddings</span> <span class="k">for</span> <span class="k">all</span> <span class="n">relation</span> <span class="n">descriptions</span>
    <span class="n">diminisher</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="n">Fine</span><span class="o">-</span><span class="n">tuning</span> <span class="n">embedding</span> <span class="n">layer</span><span class="p">,</span> <span class="n">good</span> <span class="k">for</span> <span class="n">reducing</span> <span class="n">Bi</span><span class="o">-</span><span class="n">LSTMs</span><span class="err">'</span> <span class="k">size</span>
    <span class="n">lstm_question</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="n">Bi</span><span class="o">-</span><span class="n">LSTM</span> <span class="k">for</span> <span class="k">encoding</span> <span class="n">a</span> <span class="n">question</span>
    <span class="n">lstm_relation</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="n">Bi</span><span class="o">-</span><span class="n">LSTM</span> <span class="k">for</span> <span class="k">encoding</span> <span class="n">a</span> <span class="n">relation</span>
</code></pre>
</div>
<div class="doc doc-children">
<h3 id="methods_2">Methods</h3>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.__init__">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">softmax</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h4>
<div class="doc doc-contents">
<p>Initialises all required elements of the neural network.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>emb_dim</code></td>
<td><code>int</code></td>
<td>
<p>Output size of the fine-tuning embedding layer</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>hidden_dim</code></td>
<td><code>int</code></td>
<td>
<p>Output size of the Bi-LSTM</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>softmax</code></td>
<td><code>bool</code></td>
<td>
<p>Whether or not a softmax is applied on the output layer</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">softmax</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        hidden_dim: Output size of the Bi-LSTM</span>
<span class="sd">        softmax: Whether or not a softmax is applied on the output layer</span>
<span class="sd">    """</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SimpleDot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">softmax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">hidden_dim</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialise_relations_tensor</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.forward">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.forward<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> </code>
</h4>
<div class="doc doc-contents">
<p>Application of the neural network on a given input question.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>embeds</code></td>
<td><code>Tensor</code></td>
<td>
<p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Tensor</code></td>
<td>
<p>Probabilities for the relation classes</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">"""Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities for the relation classes</span>
<span class="sd">    """</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">relations_embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span><span class="p">)</span>

    <span class="n">question_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>  <span class="c1"># T_Q x B x H</span>
    <span class="n">relation_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span><span class="p">(</span><span class="n">relations_embeds</span><span class="p">)</span>  <span class="c1"># T_R x R x H</span>
    <span class="n">last_question_out</span> <span class="o">=</span> <span class="n">question_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># B x H</span>
    <span class="n">last_relation_out</span> <span class="o">=</span> <span class="n">relation_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># R x H</span>

    <span class="c1"># relation prediction</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">last_relation_out</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">last_question_out</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># B x R x H</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">last_question_out</span>
    <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">bmm</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">:</span>
        <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">rel_scores</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rel_scores</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h0 class="doc doc-heading" data-toc-label="tagger" id="adviser.examples.qa.worldknowledge.neuralmodels.tagger">
<code>adviser.examples.qa.worldknowledge.neuralmodels.tagger</code>
</h0>
<div class="doc doc-contents">
<div class="doc doc-children">
<h1 id="classes_2">Classes</h1>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger">
<code>adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger</code>
</h2>
<div class="doc doc-contents">
<p>Neural network for predicting the topic entities.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">The</span> <span class="n">model</span> <span class="n">uses</span> <span class="n">a</span> <span class="n">question</span> <span class="n">encoder</span> <span class="k">and</span> <span class="n">classifies</span> <span class="k">each</span> <span class="n">token</span> <span class="k">using</span> <span class="n">the</span> <span class="n">BIO</span> <span class="n">tag</span> <span class="k">set</span><span class="p">.</span>

<span class="o">!!!</span> <span class="n">attributes</span>
    <span class="n">hidden_dim</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="k">Size</span> <span class="k">of</span> <span class="n">the</span> <span class="n">Bi_LSTM</span><span class="s1">'s hidden layer</span>
<span class="s1">    diminisher (nn.Module): Fine-tuning embedding layer, good for reducing Bi-LSTM'</span><span class="n">s</span> <span class="k">size</span>
    <span class="n">lstm</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="n">Bi</span><span class="o">-</span><span class="n">LSTM</span>
    <span class="n">hidden2label</span> <span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="n">Module</span><span class="p">):</span> <span class="k">Output</span> <span class="n">layer</span>
</code></pre>
</div>
<div class="doc doc-children">
<h3 id="methods_3">Methods</h3>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.__init__">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h4>
<div class="doc doc-contents">
<p>Initialises all required elements of the neural network.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>emb_dim</code></td>
<td><code>int</code></td>
<td>
<p>Output size of the fine-tuning embedding layer</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>hidden_dim</code></td>
<td><code>int</code></td>
<td>
<p>Hidden layer size of the Bi-LSTM</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">"""Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        hidden_dim: Hidden layer size of the Bi-LSTM</span>
<span class="sd">    """</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Tagger</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">hidden_dim</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">hidden_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">TAGS</span><span class="p">))</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.forward">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.forward<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span> </code>
</h4>
<div class="doc doc-contents">
<p>Application of the neural network on a given input question.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>embeds</code></td>
<td><code>Tensor</code></td>
<td>
<p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Tensor</code></td>
<td>
<p>Probabilities of each BIO tag for all tokens</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">"""Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities of each BIO tag for all tokens</span>
<span class="sd">    """</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">label_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="n">label_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">label_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">label_scores</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<h1 id="functions">Functions</h1>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities<span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">tag_idxs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts entities using the predicted BIO tags for each token</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tokens</code></td>
<td><code>List[str]</code></td>
<td>
<p>question's tokens</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>tag_idxs</code></td>
<td><code>List[int]</code></td>
<td>
<p>index of the BIO tag for each token in the question</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>List[List[str]]</code></td>
<td>
<p>List of entities, i.e. list of connected tokens</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">extract_entities</span><span class="p">(</span><span class="n">tokens</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">tag_idxs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">"""Extracts entities using the predicted BIO tags for each token</span>

<span class="sd">    Arguments:</span>
<span class="sd">        tokens: question's tokens</span>
<span class="sd">        tag_idxs: index of the BIO tag for each token in the question</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of entities, i.e. list of connected tokens</span>
<span class="sd">    """</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">curr_entity</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">TAGS</span><span class="p">[</span><span class="n">tag_idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag_idx</span> <span class="ow">in</span> <span class="n">tag_idxs</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">tags</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">'I'</span><span class="p">:</span>
            <span class="n">curr_entity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curr_entity</span><span class="p">:</span>
                <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_entity</span><span class="p">)</span>
                <span class="n">curr_entity</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">'B'</span><span class="p">:</span>
                <span class="n">curr_entity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">curr_entity</span><span class="p">:</span>
        <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">entities</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="policyqa" id="adviser.examples.qa.worldknowledge.policyqa">
<code>adviser.examples.qa.worldknowledge.policyqa</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="QaPolicy" id="adviser.examples.qa.worldknowledge.policyqa.QaPolicy">
<code>adviser.examples.qa.worldknowledge.policyqa.QaPolicy</code>
</h0>
<div class="doc doc-contents">
<p>Policy module for question answering.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Provides</span> <span class="n">a</span> <span class="k">simple</span> <span class="k">rule</span><span class="o">-</span><span class="n">based</span> <span class="n">policy</span> <span class="k">for</span> <span class="n">question</span> <span class="n">answering</span><span class="p">.</span>
<span class="n">The</span> <span class="n">QA</span> <span class="n">module</span> <span class="n">assumes</span> <span class="n">that</span> <span class="n">the</span> <span class="k">user</span> <span class="n">acts</span> <span class="n">contain</span> <span class="n">information</span> <span class="n">about</span> <span class="n">relation</span><span class="p">,</span> <span class="n">topic</span> <span class="n">entities</span>
<span class="k">and</span> <span class="n">relation</span> <span class="n">direction</span><span class="p">.</span>
<span class="n">Adequate</span> <span class="n">answers</span> <span class="k">are</span> <span class="n">looked</span> <span class="n">up</span> <span class="k">in</span> <span class="n">the</span> <span class="n">knowledge</span> <span class="k">and</span> <span class="n">published</span><span class="p">.</span>

<span class="n">The</span> <span class="n">difference</span> <span class="k">to</span> <span class="n">the</span> <span class="k">default</span> <span class="n">HandcraftedPolicy</span> <span class="k">is</span> <span class="n">that</span> <span class="k">no</span> <span class="n">BST</span> <span class="k">is</span> <span class="n">needed</span> <span class="k">and</span> <span class="n">that</span> <span class="n">multiple</span>
<span class="k">system</span> <span class="n">acts</span> <span class="n">can</span> <span class="n">be</span> <span class="n">published</span><span class="p">.</span>
</code></pre>
</div>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="semanticparser" id="adviser.examples.qa.worldknowledge.semanticparser">
<code>adviser.examples.qa.worldknowledge.semanticparser</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="QuestionParser" id="adviser.examples.qa.worldknowledge.semanticparser.QuestionParser">
<code>adviser.examples.qa.worldknowledge.semanticparser.QuestionParser</code>
</h0>
<div class="doc doc-contents">
<p>Semantic parsing module for question answering</p>
<div class="codehilite">
<pre><span></span><code><span class="err">!!!</span><span class="w"> </span><span class="n">attributes</span><span class="w"></span>
<span class="w">    </span><span class="n">device</span><span class="w"> </span><span class="p">(</span><span class="n">torch</span><span class="p">.</span><span class="n">device</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">PyTorch</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="k">object</span><span class="p">,</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">CPU</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">GPU</span><span class="w"></span>
<span class="w">    </span><span class="n">nn_relation</span><span class="w"> </span><span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="k">Module</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">neural</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">prediction</span><span class="w"></span>
<span class="w">    </span><span class="n">nn_entity</span><span class="w"> </span><span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="k">Module</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">neural</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">entity</span><span class="w"> </span><span class="n">prediction</span><span class="w"></span>
<span class="w">    </span><span class="n">nn_direction</span><span class="w"> </span><span class="p">(</span><span class="n">nn</span><span class="p">.</span><span class="k">Module</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">neural</span><span class="w"> </span><span class="n">network</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="n">prediction</span><span class="w"></span>
<span class="w">    </span><span class="n">tags</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="o">[</span><span class="n">str</span><span class="o">]</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">relation</span><span class="w"> </span><span class="n">tags</span><span class="w"></span>
<span class="w">    </span><span class="n">max_seq_len</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">tokens</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">question</span><span class="w"></span>
<span class="w">    </span><span class="n">embedding_creator</span><span class="w"> </span><span class="p">(</span><span class="n">BertEmbedding</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">BERT</span><span class="w"> </span><span class="n">embeddings</span><span class="w"></span>
</code></pre>
</div>
<div class="doc doc-children">
<h1 id="methods_4">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__">
<code class="highlight language-python">
adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">'cpu'</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>Creates neural networks for semantic parsing and other required utils</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>domain</code></td>
<td><code>LookupDomain</code></td>
<td>
<p>the QA domain</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>logger</code></td>
<td><code>DiasysLogger</code></td>
<td>
<p>the logger</p>
</td>
<td><code>&lt;DiasysLogger adviser (NOTSET)&gt;</code></td>
</tr>
<tr>
<td><code>device</code></td>
<td><code>str</code></td>
<td>
<p>PyTorch device name</p>
</td>
<td><code>'cpu'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/qa/worldknowledge/semanticparser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> \
    <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">(),</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'cpu'</span><span class="p">):</span>
    <span class="sd">"""Creates neural networks for semantic parsing and other required utils</span>

<span class="sd">    Args:</span>
<span class="sd">        domain: the QA domain</span>
<span class="sd">        logger: the logger</span>
<span class="sd">        device: PyTorch device name</span>
<span class="sd">    """</span>
    <span class="n">Service</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_relation_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_entity_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_direction_model</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_tag_set</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">embedding_creator</span> <span class="o">=</span> <span class="n">BertEmbedding</span><span class="p">(</span><span class="n">max_seq_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h4 class="doc doc-heading" id="adviser.examples.webapi">
<code>adviser.examples.webapi</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h4>
<div class="doc doc-contents">
<div class="doc doc-children">
<h5 id="modules_2">Modules</h5>
<div class="doc doc-object doc-module">
<h6 class="doc doc-heading" id="adviser.examples.webapi.mensa">
<code>adviser.examples.webapi.mensa</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h6>
<div class="doc doc-contents">
<div class="doc doc-children">
<h7>Modules</h7>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="domain" id="adviser.examples.webapi.mensa.domain">
<code>adviser.examples.webapi.mensa.domain</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="MensaDomain" id="adviser.examples.webapi.mensa.domain.MensaDomain">
<code>adviser.examples.webapi.mensa.domain.MensaDomain</code>
</h0>
<div class="doc doc-contents">
<p>Domain for the Mensa API</p>
<div class="codehilite">
<pre><span></span><code><span class="err">!!!</span><span class="w"> </span><span class="n">attributes</span><span class="w"></span>
<span class="w">    </span><span class="n">parser</span><span class="w"> </span><span class="p">(</span><span class="n">MensaParser</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">dynamically</span><span class="w"> </span><span class="n">building</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pseudo</span><span class="w"> </span><span class="k">database</span><span class="w"></span>
<span class="w">    </span><span class="n">last_results</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="o">[</span><span class="n">dict</span><span class="o">]</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="k">Current</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">about</span><span class="w"></span>
</code></pre>
</div>
<div class="doc doc-children">
<h1 id="methods_5">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.find_entities">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.find_entities<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">requested_slots</span><span class="o">=&lt;</span><span class="n">tuple_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fa655883450</span><span class="o">&gt;</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all entities from the data backend that meet the constraints.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>constraints</code></td>
<td><code>dict</code></td>
<td>
<p>Slot-value mapping of constraints.
                If empty, all entities in the database will be returned.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>requested_slots</code></td>
<td><code>Iterable</code></td>
<td>
<p>list of slots that should be returned in addition to the
                        system requestable slots and the primary key</p>
</td>
<td><code>&lt;tuple_iterator object at 0x7fa655883450&gt;</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
    <span class="sd">""" Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                            If empty, all entities in the database will be returned.</span>
<span class="sd">        requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                    system requestable slots and the primary key</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="s1">'day'</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="n">meals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">get_meals</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">'day'</span><span class="p">])</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">meal</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">meal</span> <span class="ow">in</span> <span class="n">meals</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">slot</span> <span class="o">==</span> <span class="s1">'day'</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">candidate</span> <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="n">candidate</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="o">==</span> <span class="n">constraints</span><span class="p">[</span><span class="n">slot</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="s1">'artificial_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">requested_slots</span><span class="p">):</span>
            <span class="n">cleaned_results</span> <span class="o">=</span> <span class="p">[{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span> <span class="k">for</span> <span class="n">result_dict</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cleaned_results</span> <span class="o">=</span> <span class="n">results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="n">results</span>
        <span class="k">return</span> <span class="n">cleaned_results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td><code>str</code></td>
<td>
<p>primary key value of the entity</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>requested_slots</code></td>
<td><code>Iterable</code></td>
<td>
<p>slot-value mapping of constraints</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>75
76
77
78
79
80
81
82
83
84
85</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">""" Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    """</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
    <span class="n">result</span><span class="p">[</span><span class="s1">'artificial_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity_id</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all informable slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>95
96
97</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all informable slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'day'</span><span class="p">,</span> <span class="s1">'type'</span><span class="p">,</span> <span class="s1">'vegan'</span><span class="p">,</span> <span class="s1">'vegetarian'</span><span class="p">,</span> <span class="s1">'fish'</span><span class="p">,</span> <span class="s1">'pork'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all mandatory slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 99
100
101</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all mandatory slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'day'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all possible values for an informable slot</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slot</code></td>
<td><code>str</code></td>
<td>
<p>name of the slot</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>List[str]</code></td>
<td>
<p>a list of strings, each string representing one possible value for
the specified slot.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>103
104
105
106
107
108
109
110
111
112
113
114</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">SLOT_VALUES</span>
    <span class="k">return</span> <span class="n">SLOT_VALUES</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the slot name that will be used as the 'name' of an entry </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>116
117
118</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">""" Returns the slot name that will be used as the 'name' of an entry """</span>
    <span class="k">return</span> <span class="s1">'artificial_id'</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the user. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>87
88
89</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the user. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'type'</span><span class="p">,</span> <span class="s1">'price'</span><span class="p">,</span> <span class="s1">'allergens'</span><span class="p">,</span> <span class="s1">'vegan'</span><span class="p">,</span> <span class="s1">'vegetarian'</span><span class="p">,</span> <span class="s1">'fish'</span><span class="p">,</span> <span class="s1">'pork'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots">
<code class="highlight language-python">
adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the system. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>91
92
93</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the system. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'day'</span><span class="p">,</span> <span class="s1">'type'</span><span class="p">,</span> <span class="s1">'vegan'</span><span class="p">,</span> <span class="s1">'vegetarian'</span><span class="p">,</span> <span class="s1">'fish'</span><span class="p">,</span> <span class="s1">'pork'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="nlu" id="adviser.examples.webapi.mensa.nlu">
<code>adviser.examples.webapi.mensa.nlu</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="MensaNLU" id="adviser.examples.webapi.mensa.nlu.MensaNLU">
<code>adviser.examples.webapi.mensa.nlu.MensaNLU</code>
</h0>
<div class="doc doc-contents">
<p>Adapted handcrafted NLU for the mensa domain.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">The default handcrafted NLU is adapted to automatically add the user act request(name).</span>
<span class="err">This is necessary because the name is not the primary key, i.e. it is not printed by default</span>
<span class="err">once an element is found. To force the Policy to automatically inform about the name, too,</span>
<span class="err">a request for the name is added in each turn.</span>
</code></pre>
</div>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="parser" id="adviser.examples.webapi.mensa.parser">
<code>adviser.examples.webapi.mensa.parser</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="Allergen" id="adviser.examples.webapi.mensa.parser.Allergen">
<code>adviser.examples.webapi.mensa.parser.Allergen</code>
</h0>
<div class="doc doc-contents">
<p>This enum provides the allergens used in the mensa menu.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="DishType" id="adviser.examples.webapi.mensa.parser.DishType">
<code>adviser.examples.webapi.mensa.parser.DishType</code>
</h0>
<div class="doc doc-contents">
<p>This enum provides the dish types used in the mensa menu.</p>
<div class="doc doc-children">
<h1 id="methods_6">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.DishType.from_website_name">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.DishType.from_website_name<span class="p">(</span><span class="n">website_name</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>Converts the type as listed on the website into the type used in the dialog system.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>website_name</code></td>
<td><code>str</code></td>
<td>
<p>The name as used in the response to the POST request.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DishType</code></td>
<td>
<p>The corresponding enum member.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">from_website_name</span><span class="p">(</span><span class="n">website_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'DishType'</span><span class="p">:</span>
	<span class="sd">"""Converts the type as listed on the website into the type used in the dialog system.</span>

<span class="sd">	Args:</span>
<span class="sd">		website_name: The name as used in the response to the POST request.</span>

<span class="sd">	Returns:</span>
<span class="sd">		The corresponding enum member.</span>

<span class="sd">	"""</span>


	<span class="k">if</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">'STARTER'</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Starter</span>
	<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">'BUFFET'</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Buffet</span>
	<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">'MAIN DISH'</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">MainDish</span>
	<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">'SIDE DISH'</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">SideDish</span>
	<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">'DESSERT'</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Dessert</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="Location" id="adviser.examples.webapi.mensa.parser.Location">
<code>adviser.examples.webapi.mensa.parser.Location</code>
</h0>
<div class="doc doc-contents">
<p>This enum provides the possible mensa locations.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="Meal" id="adviser.examples.webapi.mensa.parser.Meal">
<code>adviser.examples.webapi.mensa.parser.Meal</code>
</h0>
<div class="doc doc-contents">
<div class="doc doc-children">
<h1 id="methods_7">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.Meal.__init__">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.Meal.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">price_quantity</span><span class="p">,</span> <span class="n">allergens</span><span class="p">,</span> <span class="n">vegan</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">,</span> <span class="n">fish</span><span class="p">,</span> <span class="n">pork</span><span class="p">,</span> <span class="n">dish_type</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>The class for a  meal consisting of a name and several properties (slot-value pairs).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>str</code></td>
<td>
<p>The name of the meal.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>day</code></td>
<td><code>str</code></td>
<td>
<p>The day on which the meal is offered.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>prices</code></td>
<td><code>Tuple[float]</code></td>
<td>
<p>The price for students and guests.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>price_quantity</code></td>
<td><code>str</code></td>
<td>
<p>The unit for which the price is valid.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>allergens</code></td>
<td><code>List[adviser.examples.webapi.mensa.parser.Allergen]</code></td>
<td>
<p>The allergens of this meal.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vegan</code></td>
<td><code>bool</code></td>
<td>
<p>Whether the meal is vegan or not.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>vegetarian</code></td>
<td><code>bool</code></td>
<td>
<p>Whether the meal is vegetarian or not.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>fish</code></td>
<td><code>bool</code></td>
<td>
<p>Whether the meal contains fish or not.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pork</code></td>
<td><code>bool</code></td>
<td>
<p>Whether the meal contains pork or not.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>dish_type</code></td>
<td><code>DishType</code></td>
<td>
<p>The type of the dish. (Starter, Buffet, Main Dish, Side Dish or Buffet)</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">price_quantity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>\
	<span class="n">allergens</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="n">Allergen</span><span class="p">],</span> <span class="n">vegan</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">fish</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">pork</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>\
		<span class="n">dish_type</span><span class="p">:</span> <span class="n">DishType</span><span class="p">):</span>
	<span class="sd">"""The class for a  meal consisting of a name and several properties (slot-value pairs).</span>

<span class="sd">	Args:</span>
<span class="sd">		name: The name of the meal.</span>
<span class="sd">		day: The day on which the meal is offered.</span>
<span class="sd">		prices: The price for students and guests.</span>
<span class="sd">		price_quantity: The unit for which the price is valid.</span>
<span class="sd">		allergens: The allergens of this meal.</span>
<span class="sd">		vegan: Whether the meal is vegan or not.</span>
<span class="sd">		vegetarian: Whether the meal is vegetarian or not.</span>
<span class="sd">		fish: Whether the meal contains fish or not.</span>
<span class="sd">		pork: Whether the meal contains pork or not.</span>
<span class="sd">		dish_type: The type of the dish. (Starter, Buffet, Main Dish, Side Dish or Buffet)</span>

<span class="sd">	"""</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">prices</span> <span class="o">=</span> <span class="n">prices</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span> <span class="o">=</span> <span class="n">price_quantity</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="o">=</span> <span class="n">allergens</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vegan</span> <span class="o">=</span> <span class="n">vegan</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span> <span class="o">=</span> <span class="n">vegetarian</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">fish</span> <span class="o">=</span> <span class="n">fish</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">pork</span> <span class="o">=</span> <span class="n">pork</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span> <span class="o">=</span> <span class="n">dish_type</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.Meal.__repr__">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.Meal.__repr__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>The string representation of the meal.</p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>162
163
164
165</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="sd">"""The string representation of the meal."""</span>

	<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.Meal.__str__">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.Meal.__str__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>The string representation of the meal.</p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>154
155
156
157
158
159
160</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="sd">"""The string representation of the meal."""</span>

	<span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">"Meal(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, day=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2">, prices=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">		price_quantity=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span><span class="si">}</span><span class="s2">, "</span>
		<span class="sa">f</span><span class="s2">"allergens=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="si">}</span><span class="s2">, vegan=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="si">}</span><span class="s2">, vegetarian=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="si">}</span><span class="s2">, "</span>
		<span class="sa">f</span><span class="s2">"fish=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="si">}</span><span class="s2">, pork=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="si">}</span><span class="s2">, dish_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.Meal.as_dict">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.Meal.as_dict<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>A dict representation of the meal.</p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>138
139
140
141
142
143
144
145
146
147
148
149
150
151
152</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
	<span class="sd">"""A dict representation of the meal."""</span>

	<span class="k">return</span> <span class="p">{</span>
		<span class="s1">'name'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
		<span class="s1">'day'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
		<span class="s1">'type'</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
		<span class="s1">'price'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
		<span class="s1">'allergens'</span><span class="p">:</span> <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">allergen</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">allergen</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="p">])</span> <span class="k">if</span>\
			<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">'none'</span><span class="p">,</span>
		<span class="s1">'vegan'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">'vegetarian'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">'fish'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">'pork'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
		<span class="p">}</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="MensaParser" id="adviser.examples.webapi.mensa.parser.MensaParser">
<code>adviser.examples.webapi.mensa.parser.MensaParser</code>
</h0>
<div class="doc doc-contents">
<div class="doc doc-children">
<h1 id="methods_8">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.MensaParser.__init__">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.MensaParser.__init__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h2>
<div class="doc doc-contents">
<p>The class to issue post requests and parse the response. Will also take care of caching the
parser's results.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cache</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to cache results or not.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>169
170
171
172
173
174
175
176
177
178
179
180
181</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
	<span class="sd">"""</span>
<span class="sd">	The class to issue post requests and parse the response. Will also take care of caching the</span>
<span class="sd">	parser's results.</span>

<span class="sd">	Args:</span>
<span class="sd">		cache (bool): Whether to cache results or not.</span>

<span class="sd">	"""</span>

	<span class="c1">#: dict of str: storgae to cache parsed meals</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.mensa.parser.MensaParser.get_meals">
<code class="highlight language-python">
adviser.examples.webapi.mensa.parser.MensaParser.get_meals<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">use_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<div class="codehilite">
<pre><span></span><code>    <span class="n">Gets</span> <span class="n">the</span> <span class="n">meals</span> <span class="k">for</span> <span class="n">a</span> <span class="n">specified</span> <span class="k">day</span> <span class="k">by</span> <span class="n">either</span> <span class="n">looking</span> <span class="n">them</span> <span class="n">up</span> <span class="k">in</span> <span class="n">the</span> <span class="k">cache</span> <span class="k">or</span> <span class="k">by</span> <span class="n">issuing</span> <span class="k">and</span>
    <span class="n">parsing</span> <span class="n">a</span> <span class="n">post</span> <span class="n">request</span><span class="p">.</span>

    <span class="n">Args</span><span class="p">:</span>
<span class="nb">date</span> <span class="p">(</span><span class="n">str</span><span class="p">):</span> <span class="n">The</span> <span class="nb">date</span> <span class="k">for</span> <span class="n">which</span> <span class="n">the</span> <span class="k">data</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>
                    <span class="n">Can</span> <span class="n">be</span> <span class="n">a</span> <span class="n">string</span> <span class="k">in</span> <span class="n">the</span> <span class="n">format</span> <span class="s1">'Y-m-d'</span> <span class="k">or</span> <span class="n">one</span> <span class="k">of</span> <span class="n">today</span><span class="p">,</span> <span class="n">tomorrow</span> <span class="k">and</span> <span class="n">monday</span><span class="o">-</span><span class="n">sunday</span><span class="p">.</span>
<span class="n">use_cache</span> <span class="p">(</span><span class="n">bool</span><span class="p">):</span> <span class="k">If</span> <span class="k">False</span> <span class="n">will</span> <span class="n">always</span> <span class="n">query</span> <span class="n">the</span> <span class="n">server</span> <span class="k">instead</span> <span class="k">of</span> <span class="k">using</span> <span class="n">the</span> <span class="k">cache</span><span class="p">.</span>
</code></pre>
</div>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>List[adviser.examples.webapi.mensa.parser.Meal]</code></td>
<td>
<p>:obj:<code>list</code> of Meal: List of meals for specified date</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code>	<span class="k">def</span> <span class="nf">get_meals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Meal</span><span class="p">]:</span>
		<span class="sd">"""</span>
<span class="sd">		Gets the meals for a specified day by either looking them up in the cache or by issuing and</span>
<span class="sd">		parsing a post request.</span>

<span class="sd">		Args:</span>
<span class="sd">            date (str): The date for which the data will be returned.</span>
<span class="sd">				Can be a string in the format 'Y-m-d' or one of today, tomorrow and monday-sunday.</span>
<span class="sd">            use_cache (bool): If False will always query the server instead of using the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of Meal: List of meals for specified date</span>
<span class="sd">		"""</span>

		<span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">use_cache</span> <span class="ow">and</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span>
			<span class="c1"># NOTE data could be deprecated</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># issue request to server</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="ParseDateError" id="adviser.examples.webapi.mensa.parser.ParseDateError">
<code>adviser.examples.webapi.mensa.parser.ParseDateError</code>
</h0>
<div class="doc doc-contents">
<p>This exception is raised when the date cannot be parsed.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h6 class="doc doc-heading" id="adviser.examples.webapi.weather">
<code>adviser.examples.webapi.weather</code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
</h6>
<div class="doc doc-contents">
<div class="doc doc-children">
<h7>Modules</h7>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="domain" id="adviser.examples.webapi.weather.domain">
<code>adviser.examples.webapi.weather.domain</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="WeatherDomain" id="adviser.examples.webapi.weather.domain.WeatherDomain">
<code>adviser.examples.webapi.weather.domain.WeatherDomain</code>
</h0>
<div class="doc doc-contents">
<p>Domain for the Weather API.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">!!!</span><span class="w"> </span><span class="n">attributes</span><span class="w"></span>
<span class="w">    </span><span class="n">last_results</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="o">[</span><span class="n">dict</span><span class="o">]</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="k">Current</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">about</span><span class="w"></span>
</code></pre>
</div>
<div class="doc doc-children">
<h1 id="methods_9">Methods</h1>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.find_entities">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.find_entities<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">requested_slots</span><span class="o">=&lt;</span><span class="n">tuple_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fa654df9b90</span><span class="o">&gt;</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all entities from the data backend that meet the constraints.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>constraints</code></td>
<td><code>dict</code></td>
<td>
<p>Slot-value mapping of constraints.
                If empty, all entities in the database will be returned.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>requested_slots</code></td>
<td><code>Iterable</code></td>
<td>
<p>list of slots that should be returned in addition to the
                        system requestable slots and the primary key</p>
</td>
<td><code>&lt;tuple_iterator object at 0x7fa654df9b90&gt;</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
    <span class="sd">""" Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                            If empty, all entities in the database will be returned.</span>
<span class="sd">        requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                    system requestable slots and the primary key</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="s1">'location'</span> <span class="ow">in</span> <span class="n">constraints</span> <span class="ow">and</span> <span class="s1">'date'</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>

        <span class="n">forecast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">'location'</span><span class="p">],</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'date'</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">forecast</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">temperature</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">'</span><span class="si">%.0f</span><span class="s1">'</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">forecast</span><span class="p">[</span><span class="s1">'main'</span><span class="p">][</span><span class="s1">'temp'</span><span class="p">])</span> <span class="o">-</span> <span class="mf">273.15</span><span class="p">))</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">forecast</span><span class="p">[</span><span class="s1">'weather'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'description'</span><span class="p">]</span>

        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'artificial_id'</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">)),</span>
            <span class="s1">'temperature'</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
            <span class="s1">'description'</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s1">'location'</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'location'</span><span class="p">],</span>
            <span class="s1">'date'</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">'date'</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="kc">True</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">):</span>
            <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="n">result_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cleaned_result_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">cleaned_result_dict</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td><code>str</code></td>
<td>
<p>primary key value of the entity</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>requested_slots</code></td>
<td><code>Iterable</code></td>
<td>
<p>slot-value mapping of constraints</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>76
77
78
79
80
81
82
83
84</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">""" Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)]]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all informable slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>94
95
96</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all informable slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'location'</span><span class="p">,</span> <span class="s1">'date'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all mandatory slots. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 98
 99
100</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all mandatory slots. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'location'</span><span class="p">,</span> <span class="s1">'date'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns all possible values for an informable slot</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slot</code></td>
<td><code>str</code></td>
<td>
<p>name of the slot</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>List[str]</code></td>
<td>
<p>a list of strings, each string representing one possible value for
the specified slot.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>102
103
104
105
106
107
108
109
110
111
112
113</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">     """</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">'all slots in this domain do not have a fixed set of '</span>
                        <span class="s1">'values, so this method should never be called'</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns the slot name that will be used as the 'name' of an entry </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>115
116
117</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">""" Returns the slot name that will be used as the 'name' of an entry """</span>
    <span class="k">return</span> <span class="s1">'artificial_id'</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the user. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>86
87
88</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the user. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'temperature'</span><span class="p">,</span> <span class="s1">'description'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots">
<code class="highlight language-python">
adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Returns a list of all slots requestable by the system. </p>
<details class="quote">
<summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>90
91
92</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">""" Returns a list of all slots requestable by the system. """</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">'location'</span><span class="p">,</span> <span class="s1">'date'</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="nlg" id="adviser.examples.webapi.weather.nlg">
<code>adviser.examples.webapi.weather.nlg</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="WeatherNLG" id="adviser.examples.webapi.weather.nlg.WeatherNLG">
<code>adviser.examples.webapi.weather.nlg.WeatherNLG</code>
</h0>
<div class="doc doc-contents">
<p>Simple NLG for the weather domain</p>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h8 class="doc doc-heading" data-toc-label="nlu" id="adviser.examples.webapi.weather.nlu">
<code>adviser.examples.webapi.weather.nlu</code>
</h8>
<div class="doc doc-contents">
<div class="doc doc-children">
<h9>Classes</h9>
<div class="doc doc-object doc-class">
<h0 class="doc doc-heading" data-toc-label="WeatherNLU" id="adviser.examples.webapi.weather.nlu.WeatherNLU">
<code>adviser.examples.webapi.weather.nlu.WeatherNLU</code>
</h0>
<div class="doc doc-contents">
<p>Very simple NLU for the weather domain.</p>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../services/" rel="prev" title="Services">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Services
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../resources/" rel="next" title="Resources">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Resources
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.f81b9e8b.min.js"></script>
<script src="../../assets/javascripts/bundle.23546af0.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>