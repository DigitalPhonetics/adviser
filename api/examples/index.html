
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://digitalphonetics.github.io/adviser/api/examples/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Examples - Adviser</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Adviser" class="md-header__button md-logo" aria-label="Adviser" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Adviser
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Examples
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DigitalPhonetics/adviser" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Adviser" class="md-nav__button md-logo" aria-label="Adviser" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Adviser
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DigitalPhonetics/adviser" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Examples
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adviser.examples" class="md-nav__link">
    adviser.examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adviser.examples.qa" class="md-nav__link">
    qa
  </a>
  
    <nav class="md-nav" aria-label="qa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge" class="md-nav__link">
    worldknowledge
  </a>
  
    <nav class="md-nav" aria-label="worldknowledge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain" class="md-nav__link">
    WorldKnowledgeDomain
  </a>
  
    <nav class="md-nav" aria-label="WorldKnowledgeDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name" class="md-nav__link">
    get_domain_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg" class="md-nav__link">
    multinlg
  </a>
  
    <nav class="md-nav" aria-label="multinlg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG" class="md-nav__link">
    MultiNLG
  </a>
  
    <nav class="md-nav" aria-label="MultiNLG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.publish_system_utterance" class="md-nav__link">
    publish_system_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels" class="md-nav__link">
    neuralmodels
  </a>
  
    <nav class="md-nav" aria-label="neuralmodels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.director" class="md-nav__link">
    director
  </a>
  
    <nav class="md-nav" aria-label="director">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier" class="md-nav__link">
    Classifier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot" class="md-nav__link">
    simpledot
  </a>
  
    <nav class="md-nav" aria-label="simpledot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot" class="md-nav__link">
    SimpleDot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger" class="md-nav__link">
    tagger
  </a>
  
    <nav class="md-nav" aria-label="tagger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.TAGS" class="md-nav__link">
    TAGS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger" class="md-nav__link">
    Tagger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities" class="md-nav__link">
    extract_entities()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa" class="md-nav__link">
    policyqa
  </a>
  
    <nav class="md-nav" aria-label="policyqa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy" class="md-nav__link">
    QaPolicy
  </a>
  
    <nav class="md-nav" aria-label="QaPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.generate_sys_acts" class="md-nav__link">
    generate_sys_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser" class="md-nav__link">
    semanticparser
  </a>
  
    <nav class="md-nav" aria-label="semanticparser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser" class="md-nav__link">
    QuestionParser
  </a>
  
    <nav class="md-nav" aria-label="QuestionParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.parse_user_utterance" class="md-nav__link">
    parse_user_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adviser.examples.webapi" class="md-nav__link">
    webapi
  </a>
  
    <nav class="md-nav" aria-label="webapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa" class="md-nav__link">
    mensa
  </a>
  
    <nav class="md-nav" aria-label="mensa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.SLOT_VALUES" class="md-nav__link">
    SLOT_VALUES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain" class="md-nav__link">
    MensaDomain
  </a>
  
    <nav class="md-nav" aria-label="MensaDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_default_inform_slots" class="md-nav__link">
    get_default_inform_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu" class="md-nav__link">
    nlu
  </a>
  
    <nav class="md-nav" aria-label="nlu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU" class="md-nav__link">
    MensaNLU
  </a>
  
    <nav class="md-nav" aria-label="MensaNLU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.extract_user_acts" class="md-nav__link">
    extract_user_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser" class="md-nav__link">
    parser
  </a>
  
    <nav class="md-nav" aria-label="parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen" class="md-nav__link">
    Allergen
  </a>
  
    <nav class="md-nav" aria-label="Allergen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Almonds" class="md-nav__link">
    Almonds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Barley" class="md-nav__link">
    Barley
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.BrazilNut" class="md-nav__link">
    BrazilNut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Cashews" class="md-nav__link">
    Cashews
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Celery" class="md-nav__link">
    Celery
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Egg" class="md-nav__link">
    Egg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Fish" class="md-nav__link">
    Fish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Hazelnuts" class="md-nav__link">
    Hazelnuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.KhorasanWheat" class="md-nav__link">
    KhorasanWheat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Lactose" class="md-nav__link">
    Lactose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Lupin" class="md-nav__link">
    Lupin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Macadamia" class="md-nav__link">
    Macadamia
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Millet" class="md-nav__link">
    Millet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Mollusca" class="md-nav__link">
    Mollusca
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Mustard" class="md-nav__link">
    Mustard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Peanut" class="md-nav__link">
    Peanut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Pecan" class="md-nav__link">
    Pecan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Pistachio" class="md-nav__link">
    Pistachio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Rye" class="md-nav__link">
    Rye
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Sesame" class="md-nav__link">
    Sesame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Shellfishes" class="md-nav__link">
    Shellfishes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Soy" class="md-nav__link">
    Soy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Spelt" class="md-nav__link">
    Spelt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Sulfite" class="md-nav__link">
    Sulfite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Walnuts" class="md-nav__link">
    Walnuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Wheat" class="md-nav__link">
    Wheat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType" class="md-nav__link">
    DishType
  </a>
  
    <nav class="md-nav" aria-label="DishType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Buffet" class="md-nav__link">
    Buffet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Dessert" class="md-nav__link">
    Dessert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.MainDish" class="md-nav__link">
    MainDish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.SideDish" class="md-nav__link">
    SideDish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Starter" class="md-nav__link">
    Starter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location" class="md-nav__link">
    Location
  </a>
  
    <nav class="md-nav" aria-label="Location">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.ESSLINGEN_STADTMITTE" class="md-nav__link">
    ESSLINGEN_STADTMITTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.FLANDERNSTRASSE" class="md-nav__link">
    FLANDERNSTRASSE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.KUNSTAKADEMIE" class="md-nav__link">
    KUNSTAKADEMIE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.LUDWIGSBURG" class="md-nav__link">
    LUDWIGSBURG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.MUSIKHOCHSCHULE" class="md-nav__link">
    MUSIKHOCHSCHULE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_MITTE" class="md-nav__link">
    STUTTGART_MITTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_VAIHINGEN" class="md-nav__link">
    STUTTGART_VAIHINGEN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal" class="md-nav__link">
    Meal
  </a>
  
    <nav class="md-nav" aria-label="Meal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.as_dict" class="md-nav__link">
    as_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser" class="md-nav__link">
    MensaParser
  </a>
  
    <nav class="md-nav" aria-label="MensaParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser.get_meals" class="md-nav__link">
    get_meals()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.ParseDateError" class="md-nav__link">
    ParseDateError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather" class="md-nav__link">
    weather
  </a>
  
    <nav class="md-nav" aria-label="weather">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.API_KEY" class="md-nav__link">
    API_KEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain" class="md-nav__link">
    WeatherDomain
  </a>
  
    <nav class="md-nav" aria-label="WeatherDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_default_inform_slots" class="md-nav__link">
    get_default_inform_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg" class="md-nav__link">
    nlg
  </a>
  
    <nav class="md-nav" aria-label="nlg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG" class="md-nav__link">
    WeatherNLG
  </a>
  
    <nav class="md-nav" aria-label="WeatherNLG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.generate_system_utterance" class="md-nav__link">
    generate_system_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu" class="md-nav__link">
    nlu
  </a>
  
    <nav class="md-nav" aria-label="nlu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TODAY_REGEXES" class="md-nav__link">
    WEATHER_DATE_TODAY_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TOMORROW_REGEXES" class="md-nav__link">
    WEATHER_DATE_TOMORROW_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_LOCATION_REGEXES" class="md-nav__link">
    WEATHER_LOCATION_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU" class="md-nav__link">
    WeatherNLU
  </a>
  
    <nav class="md-nav" aria-label="WeatherNLU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.extract_user_acts" class="md-nav__link">
    extract_user_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/services/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/dialogsystem/" class="md-nav__link">
        Dialog System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/advanced/" class="md-nav__link">
        Advanced
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adviser.examples" class="md-nav__link">
    adviser.examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adviser.examples.qa" class="md-nav__link">
    qa
  </a>
  
    <nav class="md-nav" aria-label="qa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge" class="md-nav__link">
    worldknowledge
  </a>
  
    <nav class="md-nav" aria-label="worldknowledge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain" class="md-nav__link">
    WorldKnowledgeDomain
  </a>
  
    <nav class="md-nav" aria-label="WorldKnowledgeDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name" class="md-nav__link">
    get_domain_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.domain.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg" class="md-nav__link">
    multinlg
  </a>
  
    <nav class="md-nav" aria-label="multinlg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG" class="md-nav__link">
    MultiNLG
  </a>
  
    <nav class="md-nav" aria-label="MultiNLG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.publish_system_utterance" class="md-nav__link">
    publish_system_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels" class="md-nav__link">
    neuralmodels
  </a>
  
    <nav class="md-nav" aria-label="neuralmodels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.director" class="md-nav__link">
    director
  </a>
  
    <nav class="md-nav" aria-label="director">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier" class="md-nav__link">
    Classifier
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot" class="md-nav__link">
    simpledot
  </a>
  
    <nav class="md-nav" aria-label="simpledot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot" class="md-nav__link">
    SimpleDot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger" class="md-nav__link">
    tagger
  </a>
  
    <nav class="md-nav" aria-label="tagger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.TAGS" class="md-nav__link">
    TAGS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger" class="md-nav__link">
    Tagger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities" class="md-nav__link">
    extract_entities()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa" class="md-nav__link">
    policyqa
  </a>
  
    <nav class="md-nav" aria-label="policyqa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy" class="md-nav__link">
    QaPolicy
  </a>
  
    <nav class="md-nav" aria-label="QaPolicy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.generate_sys_acts" class="md-nav__link">
    generate_sys_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser" class="md-nav__link">
    semanticparser
  </a>
  
    <nav class="md-nav" aria-label="semanticparser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser" class="md-nav__link">
    QuestionParser
  </a>
  
    <nav class="md-nav" aria-label="QuestionParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.parse_user_utterance" class="md-nav__link">
    parse_user_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.qa.worldknowledge.semanticparser.get_root_dir" class="md-nav__link">
    get_root_dir()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adviser.examples.webapi" class="md-nav__link">
    webapi
  </a>
  
    <nav class="md-nav" aria-label="webapi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa" class="md-nav__link">
    mensa
  </a>
  
    <nav class="md-nav" aria-label="mensa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.SLOT_VALUES" class="md-nav__link">
    SLOT_VALUES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain" class="md-nav__link">
    MensaDomain
  </a>
  
    <nav class="md-nav" aria-label="MensaDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_default_inform_slots" class="md-nav__link">
    get_default_inform_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu" class="md-nav__link">
    nlu
  </a>
  
    <nav class="md-nav" aria-label="nlu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU" class="md-nav__link">
    MensaNLU
  </a>
  
    <nav class="md-nav" aria-label="MensaNLU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.extract_user_acts" class="md-nav__link">
    extract_user_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser" class="md-nav__link">
    parser
  </a>
  
    <nav class="md-nav" aria-label="parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen" class="md-nav__link">
    Allergen
  </a>
  
    <nav class="md-nav" aria-label="Allergen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Almonds" class="md-nav__link">
    Almonds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Barley" class="md-nav__link">
    Barley
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.BrazilNut" class="md-nav__link">
    BrazilNut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Cashews" class="md-nav__link">
    Cashews
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Celery" class="md-nav__link">
    Celery
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Egg" class="md-nav__link">
    Egg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Fish" class="md-nav__link">
    Fish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Hazelnuts" class="md-nav__link">
    Hazelnuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.KhorasanWheat" class="md-nav__link">
    KhorasanWheat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Lactose" class="md-nav__link">
    Lactose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Lupin" class="md-nav__link">
    Lupin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Macadamia" class="md-nav__link">
    Macadamia
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Millet" class="md-nav__link">
    Millet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Mollusca" class="md-nav__link">
    Mollusca
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Mustard" class="md-nav__link">
    Mustard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Peanut" class="md-nav__link">
    Peanut
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Pecan" class="md-nav__link">
    Pecan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Pistachio" class="md-nav__link">
    Pistachio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Rye" class="md-nav__link">
    Rye
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Sesame" class="md-nav__link">
    Sesame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Shellfishes" class="md-nav__link">
    Shellfishes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Soy" class="md-nav__link">
    Soy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Spelt" class="md-nav__link">
    Spelt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Sulfite" class="md-nav__link">
    Sulfite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Walnuts" class="md-nav__link">
    Walnuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Allergen.Wheat" class="md-nav__link">
    Wheat
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType" class="md-nav__link">
    DishType
  </a>
  
    <nav class="md-nav" aria-label="DishType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Buffet" class="md-nav__link">
    Buffet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Dessert" class="md-nav__link">
    Dessert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.MainDish" class="md-nav__link">
    MainDish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.SideDish" class="md-nav__link">
    SideDish
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.DishType.Starter" class="md-nav__link">
    Starter
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location" class="md-nav__link">
    Location
  </a>
  
    <nav class="md-nav" aria-label="Location">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.ESSLINGEN_STADTMITTE" class="md-nav__link">
    ESSLINGEN_STADTMITTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.FLANDERNSTRASSE" class="md-nav__link">
    FLANDERNSTRASSE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.KUNSTAKADEMIE" class="md-nav__link">
    KUNSTAKADEMIE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.LUDWIGSBURG" class="md-nav__link">
    LUDWIGSBURG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.MUSIKHOCHSCHULE" class="md-nav__link">
    MUSIKHOCHSCHULE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_MITTE" class="md-nav__link">
    STUTTGART_MITTE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_VAIHINGEN" class="md-nav__link">
    STUTTGART_VAIHINGEN
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal" class="md-nav__link">
    Meal
  </a>
  
    <nav class="md-nav" aria-label="Meal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__repr__" class="md-nav__link">
    __repr__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.__str__" class="md-nav__link">
    __str__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.Meal.as_dict" class="md-nav__link">
    as_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser" class="md-nav__link">
    MensaParser
  </a>
  
    <nav class="md-nav" aria-label="MensaParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.MensaParser.get_meals" class="md-nav__link">
    get_meals()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.mensa.parser.ParseDateError" class="md-nav__link">
    ParseDateError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather" class="md-nav__link">
    weather
  </a>
  
    <nav class="md-nav" aria-label="weather">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain" class="md-nav__link">
    domain
  </a>
  
    <nav class="md-nav" aria-label="domain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.API_KEY" class="md-nav__link">
    API_KEY
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain" class="md-nav__link">
    WeatherDomain
  </a>
  
    <nav class="md-nav" aria-label="WeatherDomain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_entities" class="md-nav__link">
    find_entities()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity" class="md-nav__link">
    find_info_about_entity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_default_inform_slots" class="md-nav__link">
    get_default_inform_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots" class="md-nav__link">
    get_informable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_keyword" class="md-nav__link">
    get_keyword()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots" class="md-nav__link">
    get_mandatory_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values" class="md-nav__link">
    get_possible_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key" class="md-nav__link">
    get_primary_key()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots" class="md-nav__link">
    get_requestable_slots()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots" class="md-nav__link">
    get_system_requestable_slots()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg" class="md-nav__link">
    nlg
  </a>
  
    <nav class="md-nav" aria-label="nlg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG" class="md-nav__link">
    WeatherNLG
  </a>
  
    <nav class="md-nav" aria-label="WeatherNLG">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.generate_system_utterance" class="md-nav__link">
    generate_system_utterance()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu" class="md-nav__link">
    nlu
  </a>
  
    <nav class="md-nav" aria-label="nlu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TODAY_REGEXES" class="md-nav__link">
    WEATHER_DATE_TODAY_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TOMORROW_REGEXES" class="md-nav__link">
    WEATHER_DATE_TOMORROW_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WEATHER_LOCATION_REGEXES" class="md-nav__link">
    WEATHER_LOCATION_REGEXES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU" class="md-nav__link">
    WeatherNLU
  </a>
  
    <nav class="md-nav" aria-label="WeatherNLU">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.extract_user_acts" class="md-nav__link">
    extract_user_acts()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/DigitalPhonetics/adviser/edit/master/docs/api/examples.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="adviser.examples"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h2 id="adviser.examples.qa" class="doc doc-heading">
        <code>qa</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="adviser.examples.qa.worldknowledge" class="doc doc-heading">
        <code>worldknowledge</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.qa.worldknowledge.domain" class="doc doc-heading">
        <code>domain</code>



<a href="#adviser.examples.qa.worldknowledge.domain" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain" class="doc doc-heading">
        <code>
WorldKnowledgeDomain            (<span title="utils.domain.lookupdomain.LookupDomain">LookupDomain</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Question answering for the world knowledge domain.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>-</code></td>
        <td><code>artificial_id_counter (int</code></td>
        <td><p>pseudo identifier for each entry</p></td>
      </tr>
      <tr>
        <td><code>-</code></td>
        <td><code>name_lex (Dict[str,str]</code></td>
        <td><p>lexicon for matching topic's names to their KG entity</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WorldKnowledgeDomain</span><span class="p">(</span><span class="n">LookupDomain</span><span class="p">):</span>
    <span class="c1"># Attribute docstrings currently not considered by mkdocstrings -&gt; write plugin?</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Question answering for the world knowledge domain.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        - artificial_id_counter (int): pseudo identifier for each entry</span>
<span class="sd">        - name_lex (Dict[str,str]): lexicon for matching topic&#39;s names to their KG entity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls super class&#39; constructor and loads name lexicon&quot;&quot;&quot;</span>

        <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;CSQA&#39;</span><span class="p">,</span> <span class="s1">&#39;World Knowledge&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#int: lexicon for matching topic&#39;s names to their KG entity</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name_lex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_name_lexicon</span><span class="p">()</span>
        <span class="sd">&quot;&quot;&quot;Dict[str,str]: lexicon for matching topic&#39;s names to their KG entity.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_init_name_lexicon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;ontologies&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;name_dict.json&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_find_topic_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">):</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_lex</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">ent</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ent</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_perform_out_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://query.wikidata.org/sparql&#39;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot; SELECT ?item ?itemLabel</span>
<span class="s2">                    WHERE</span>
<span class="s2">                    {</span>
<span class="s2">                    wd:</span><span class="si">%s</span><span class="s2"> wdt:</span><span class="si">%s</span><span class="s2"> ?item.</span>
<span class="s2">                    ?item rdfs:label ?itemLabel.</span>
<span class="s2">                    FILTER(LANG(?itemLabel) = &#39;en&#39;).</span>
<span class="s2">                    }&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">relation</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;query=(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">}</span>
        <span class="c1"># print(body, data_points)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;content-type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/sparql-query&#39;</span><span class="p">,</span> <span class="s1">&#39;user-agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Python 3.6.8&#39;</span><span class="p">},</span> <span class="n">data</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="c1"># print(&#39;Status&#39;, r.status_code)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;itemLabel&#39;</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">]</span> <span class="p">[</span><span class="s1">&#39;bindings&#39;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">_perform_in_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">topic</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://query.wikidata.org/sparql&#39;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot; SELECT ?item ?itemLabel</span>
<span class="s2">                    WHERE</span>
<span class="s2">                    {</span>
<span class="s2">                    ?item wdt:</span><span class="si">%s</span><span class="s2"> wd:</span><span class="si">%s</span><span class="s2">.</span>
<span class="s2">                    ?item rdfs:label ?itemLabel.</span>
<span class="s2">                    FILTER(LANG(?itemLabel) = &#39;en&#39;).</span>
<span class="s2">                    }&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;query=(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
                <span class="s1">&#39;content-type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/sparql-query&#39;</span><span class="p">,</span>
                <span class="s1">&#39;user-agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Python 3.6.8&#39;</span>
            <span class="p">},</span> <span class="n">data</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;itemLabel&#39;</span><span class="p">][</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">]</span> <span class="p">[</span><span class="s1">&#39;bindings&#39;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            constraints (dict): slot-value mapping of constraints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="s1">&#39;relation&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>
        <span class="k">assert</span> <span class="s1">&#39;topic&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>
        <span class="k">assert</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>

        <span class="n">topics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_topic_entities</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">topics</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic_label</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
            <span class="n">answer_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
                <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_out_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="n">topic_label</span><span class="p">,</span>
                        <span class="s1">&#39;predicate&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">answer_id</span>
                    <span class="p">})</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_in_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="n">answer_id</span><span class="p">,</span>
                        <span class="s1">&#39;predicate&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">topic_label</span>
                    <span class="p">})</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">answers</span>

    <span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">            specified entity.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (str): primary key value of the entity</span>
<span class="sd">            requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;should not be called&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_domain_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;qa&quot;</span>

    <span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="s1">&#39;predicate&#39;</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;object_type&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">        Args:</span>
<span class="sd">            slot (str): name of the slot</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list of strings, each string representing one possible value for</span>
<span class="sd">            the specified slot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># &#39;assert False, &quot;this method should not be called&quot;&#39;</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;should not be called&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>

    <span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;world knowledge&#39;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Calls super class' constructor and loads name lexicon</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calls super class&#39; constructor and loads name lexicon&quot;&quot;&quot;</span>

    <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;CSQA&#39;</span><span class="p">,</span> <span class="s1">&#39;World Knowledge&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#int: lexicon for matching topic&#39;s names to their KG entity</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">name_lex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_name_lexicon</span><span class="p">()</span>
    <span class="sd">&quot;&quot;&quot;Dict[str,str]: lexicon for matching topic&#39;s names to their KG entity.&quot;&quot;&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_entities" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all entities from the data backend that meet the constraints.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>constraints</code></td>
        <td><code>dict</code></td>
        <td><p>slot-value mapping of constraints</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): slot-value mapping of constraints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="s1">&#39;relation&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>
    <span class="k">assert</span> <span class="s1">&#39;topic&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>
    <span class="k">assert</span> <span class="s1">&#39;direction&#39;</span> <span class="ow">in</span> <span class="n">constraints</span>

    <span class="n">topics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_topic_entities</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;topic&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">topics</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic_label</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
        <span class="n">answer_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
            <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_out_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="n">topic_label</span><span class="p">,</span>
                    <span class="s1">&#39;predicate&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">answer_id</span>
                <span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">answer_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_in_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span> <span class="n">topic_id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">answer_id</span> <span class="ow">in</span> <span class="n">answer_ids</span><span class="p">:</span>
                <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="n">answer_id</span><span class="p">,</span>
                    <span class="s1">&#39;predicate&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">topic_label</span>
                <span class="p">})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">artificial_id_counter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">answers</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.find_info_about_entity" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>entity_id</code></td>
        <td><code>str</code></td>
        <td><p>primary key value of the entity</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>requested_slots</code></td>
        <td><code>dict</code></td>
        <td><p>slot-value mapping of constraints</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;should not be called&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_domain_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_domain_name" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Return the domain name of the current ontology.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_domain_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;qa&quot;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_informable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all informable slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_keyword" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_keyword" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;world knowledge&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_mandatory_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all mandatory slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_possible_values" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all possible values for an informable slot</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>slot</code></td>
        <td><code>str</code></td>
        <td><p>name of the slot</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>a list of strings, each string representing one possible value for
the specified slot.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># &#39;assert False, &quot;this method should not be called&quot;&#39;</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;should not be called&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_primary_key" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the slot name that will be used as the 'name' of an entry </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the user. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="s1">&#39;predicate&#39;</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;object_type&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.WorldKnowledgeDomain.get_system_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the system. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h5 id="adviser.examples.qa.worldknowledge.domain.get_root_dir" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_root_dir</span><span class="p">()</span></code>


<a href="#adviser.examples.qa.worldknowledge.domain.get_root_dir" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_dir</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))))</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.qa.worldknowledge.multinlg" class="doc doc-heading">
        <code>multinlg</code>



<a href="#adviser.examples.qa.worldknowledge.multinlg" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">

      <p>Handcrafted (i.e. template-based) Natural Language Generation Module</p>



  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.qa.worldknowledge.multinlg.MultiNLG" class="doc doc-heading">
        <code>
MultiNLG            (<span title="services.nlg.nlg.HandcraftedNLG">HandcraftedNLG</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Extension of the handcrafted NLG by allowing multiple system acts.</p>
<p>This change is necessary for QA, since the policy publishes multiple system acts.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/multinlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MultiNLG</span><span class="p">(</span><span class="n">HandcraftedNLG</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extension of the handcrafted NLG by allowing multiple system acts.</span>

<span class="sd">    This change is necessary for QA, since the policy publishes multiple system acts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">Domain</span><span class="p">,</span> <span class="n">template_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sub_topic_domains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">(),</span> <span class="n">template_file_german</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">language</span><span class="p">:</span> <span class="n">Language</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="c1"># only calls the super class&#39; constructor</span>
        <span class="n">HandcraftedNLG</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">template_file</span><span class="p">,</span> <span class="n">sub_topic_domains</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">template_file_german</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sys_acts&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sys_utterance&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">publish_system_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sys_acts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SysAct</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sys_utterance</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generates the system utterance and publishes it.</span>

<span class="sd">        Instead of the HandcraftedNLG class, this class takes multiple system acts and</span>
<span class="sd">        applies the templates for each system act separately. Each message is then printed in a</span>
<span class="sd">        new line.</span>

<span class="sd">        Args:</span>
<span class="sd">            sys_acts: The list of system acts as published by the (QA) policy</span>

<span class="sd">        Returns:</span>
<span class="sd">            a dict containing the system utterance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">generate_system_utterance</span><span class="p">(</span><span class="n">sys_act</span><span class="p">)</span> <span class="k">for</span> <span class="n">sys_act</span> <span class="ow">in</span> <span class="n">sys_acts</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="n">message</span><span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.multinlg.MultiNLG.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">template_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sub_topic_domains</span><span class="o">=</span><span class="p">{},</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">template_file_german</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/multinlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">Domain</span><span class="p">,</span> <span class="n">template_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sub_topic_domains</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
             <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">(),</span> <span class="n">template_file_german</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">language</span><span class="p">:</span> <span class="n">Language</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="c1"># only calls the super class&#39; constructor</span>
    <span class="n">HandcraftedNLG</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">template_file</span><span class="p">,</span> <span class="n">sub_topic_domains</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">template_file_german</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.multinlg.MultiNLG.publish_system_utterance" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">publish_system_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.multinlg.MultiNLG.publish_system_utterance" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/multinlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.qa.worldknowledge.neuralmodels" class="doc doc-heading">
        <code>neuralmodels</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.neuralmodels" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h5 id="adviser.examples.qa.worldknowledge.neuralmodels.director" class="doc doc-heading">
        <code>director</code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.director" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier" class="doc doc-heading">
        <code>
Classifier            (<span title="torch.nn.modules.module.Module">Module</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Neural network for predicting the relation's direction (outgoing or incoming).</p>
<p>The model uses a question encoder to classify the question as one of the two classes
"outgoing" or "incoming".</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hidden_dim</code></td>
        <td><code>int</code></td>
        <td><p>Size of the Bi_LSTM's hidden layer</p></td>
      </tr>
      <tr>
        <td><code>out_dim</code></td>
        <td><code>int</code></td>
        <td><p>Size of the output layer (here: 2)</p></td>
      </tr>
      <tr>
        <td><code>diminisher</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Fine-tuning embedding layer, good for reducing Bi-LSTM's size</p></td>
      </tr>
      <tr>
        <td><code>lstm</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Bi-LSTM for encoding a question</p></td>
      </tr>
      <tr>
        <td><code>hidden2tag</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Output layer</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/director.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Classifier</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Neural network for predicting the relation&#39;s direction (outgoing or incoming).</span>

<span class="sd">    The model uses a question encoder to classify the question as one of the two classes</span>
<span class="sd">    &quot;outgoing&quot; or &quot;incoming&quot;.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        hidden_dim (int): Size of the Bi_LSTM&#39;s hidden layer</span>
<span class="sd">        out_dim (int): Size of the output layer (here: 2)</span>
<span class="sd">        diminisher (nn.Module): Fine-tuning embedding layer, good for reducing Bi-LSTM&#39;s size</span>
<span class="sd">        lstm (nn.Module): Bi-LSTM for encoding a question</span>
<span class="sd">        hidden2tag (nn.Module): Output layer</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">        Args:</span>
<span class="sd">            emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">            lstm_out_dim: Output size of the Bi-LSTM</span>
<span class="sd">            num_classes: Size of the output layer (in this context, always 2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Classifier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">lstm_out_dim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span> <span class="o">=</span> <span class="n">num_classes</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">lstm_out_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">        Args:</span>
<span class="sd">            embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">        Returns:</span>
<span class="sd">            Probabilities of the two classes &quot;incoming&quot; and &quot;outgoing&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
        <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
        <span class="n">tag_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">tag_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">tag_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tag_scores</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.__init__" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Initialises all required elements of the neural network.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>emb_dim</code></td>
        <td><code>int</code></td>
        <td><p>Output size of the fine-tuning embedding layer</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lstm_out_dim</code></td>
        <td><code>int</code></td>
        <td><p>Output size of the Bi-LSTM</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>num_classes</code></td>
        <td><code>int</code></td>
        <td><p>Size of the output layer (in this context, always 2)</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/director.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        lstm_out_dim: Output size of the Bi-LSTM</span>
<span class="sd">        num_classes: Size of the output layer (in this context, always 2)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Classifier</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">lstm_out_dim</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span> <span class="o">=</span> <span class="n">num_classes</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">lstm_out_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">lstm_out_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">out_dim</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.forward" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.director.Classifier.forward" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Application of the neural network on a given input question.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>embeds</code></td>
        <td><code>Tensor</code></td>
        <td><p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tensor</code></td>
      <td><p>Probabilities of the two classes "incoming" and "outgoing"</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/director.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities of the two classes &quot;incoming&quot; and &quot;outgoing&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">tag_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2tag</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">tag_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">tag_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tag_scores</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h5 id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot" class="doc doc-heading">
        <code>simpledot</code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot" class="doc doc-heading">
        <code>
SimpleDot            (<span title="torch.nn.modules.module.Module">Module</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Neural network for predicting the relation of a question.</p>
<p>The simple dot approach compares a question with each possible relation candidate by
taking the (simple) dot product between the encoded question and every encoded relation.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>softmax</code></td>
        <td><code>bool</code></td>
        <td><p>whether or not the scores should be converted to probabilities</p></td>
      </tr>
      <tr>
        <td><code>hidden</code></td>
        <td><code>int</code></td>
        <td><p>size of the hidden layer</p></td>
      </tr>
      <tr>
        <td><code>relations_tensor</code></td>
        <td><code>torch.autograd.Variable</code></td>
        <td><p>embeddings for all relation descriptions</p></td>
      </tr>
      <tr>
        <td><code>diminisher</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Fine-tuning embedding layer, good for reducing Bi-LSTMs' size</p></td>
      </tr>
      <tr>
        <td><code>lstm_question</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Bi-LSTM for encoding a question</p></td>
      </tr>
      <tr>
        <td><code>lstm_relation</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Bi-LSTM for encoding a relation</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">SimpleDot</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Neural network for predicting the relation of a question.</span>

<span class="sd">    The simple dot approach compares a question with each possible relation candidate by</span>
<span class="sd">    taking the (simple) dot product between the encoded question and every encoded relation.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        softmax (bool): whether or not the scores should be converted to probabilities</span>
<span class="sd">        hidden (int): size of the hidden layer</span>
<span class="sd">        relations_tensor (torch.autograd.Variable): embeddings for all relation descriptions</span>
<span class="sd">        diminisher (nn.Module): Fine-tuning embedding layer, good for reducing Bi-LSTMs&#39; size</span>
<span class="sd">        lstm_question (nn.Module): Bi-LSTM for encoding a question</span>
<span class="sd">        lstm_relation (nn.Module): Bi-LSTM for encoding a relation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">softmax</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">        Args:</span>
<span class="sd">            emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">            hidden_dim: Output size of the Bi-LSTM</span>
<span class="sd">            softmax: Whether or not a softmax is applied on the output layer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleDot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">softmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">hidden_dim</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialise_relations_tensor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_initialise_relations_tensor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_rel_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">autograd</span><span class="o">.</span><span class="n">Variable</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Creates a tensor containing word embeddings of all relation descriptions.</span>

<span class="sd">        To be processable, the tensor is transformed to the shape</span>
<span class="sd">        |token| x |relation| x |embeddings|.</span>

<span class="sd">        Keyword Arguments:</span>
<span class="sd">            max_rel_len: maximum number of tokens in the relation descriptions</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tensor containing word embeddings of all relation descriptions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relations_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;ontologies&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;csqa_relation_embeddings.bin&#39;</span><span class="p">),</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">rels</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">relations_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">emb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">emb</span> <span class="ow">in</span> <span class="n">rels</span><span class="p">]</span>
            <span class="n">tokens</span> <span class="o">=</span> <span class="p">[</span><span class="n">emb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">emb</span> <span class="ow">in</span> <span class="n">rels</span><span class="p">]</span>

        <span class="n">relations</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># R x T_R x E</span>
        <span class="k">for</span> <span class="n">relation</span> <span class="ow">in</span> <span class="n">relations_list</span><span class="p">:</span>
            <span class="n">relation</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_rel_len</span><span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">relation</span><span class="p">)))</span>
            <span class="n">relations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relation</span><span class="p">[:</span><span class="n">max_rel_len</span><span class="p">])</span>
        <span class="c1"># T_R x R x E</span>
        <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">autograd</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">relations</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">requires_grad</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">        Args:</span>
<span class="sd">            embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">        Returns:</span>
<span class="sd">            Probabilities for the relation classes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
        <span class="n">relations_embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span><span class="p">)</span>

        <span class="n">question_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>  <span class="c1"># T_Q x B x H</span>
        <span class="n">relation_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span><span class="p">(</span><span class="n">relations_embeds</span><span class="p">)</span>  <span class="c1"># T_R x R x H</span>
        <span class="n">last_question_out</span> <span class="o">=</span> <span class="n">question_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># B x H</span>
        <span class="n">last_relation_out</span> <span class="o">=</span> <span class="n">relation_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># R x H</span>

        <span class="c1"># relation prediction</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">last_relation_out</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">last_question_out</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># B x R x H</span>
        <span class="n">vector</span> <span class="o">=</span> <span class="n">last_question_out</span>
        <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">bmm</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">:</span>
            <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">rel_scores</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">rel_scores</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">softmax</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.__init__" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Initialises all required elements of the neural network.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>emb_dim</code></td>
        <td><code>int</code></td>
        <td><p>Output size of the fine-tuning embedding layer</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>hidden_dim</code></td>
        <td><code>int</code></td>
        <td><p>Output size of the Bi-LSTM</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>softmax</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not a softmax is applied on the output layer</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">softmax</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        hidden_dim: Output size of the Bi-LSTM</span>
<span class="sd">        softmax: Whether or not a softmax is applied on the output layer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SimpleDot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span> <span class="o">=</span> <span class="n">softmax</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">hidden_dim</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialise_relations_tensor</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.forward" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.SimpleDot.forward" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Application of the neural network on a given input question.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>embeds</code></td>
        <td><code>Tensor</code></td>
        <td><p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tensor</code></td>
      <td><p>Probabilities for the relation classes</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities for the relation classes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">relations_embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relations_tensor</span><span class="p">)</span>

    <span class="n">question_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_question</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>  <span class="c1"># T_Q x B x H</span>
    <span class="n">relation_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm_relation</span><span class="p">(</span><span class="n">relations_embeds</span><span class="p">)</span>  <span class="c1"># T_R x R x H</span>
    <span class="n">last_question_out</span> <span class="o">=</span> <span class="n">question_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># B x H</span>
    <span class="n">last_relation_out</span> <span class="o">=</span> <span class="n">relation_out</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span><span class="bp">self</span><span class="o">.</span><span class="n">hidden</span><span class="p">:]</span>  <span class="c1"># R x H</span>

    <span class="c1"># relation prediction</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">last_relation_out</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">last_question_out</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># B x R x H</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">last_question_out</span>
    <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">bmm</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">softmax</span><span class="p">:</span>
        <span class="n">rel_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">rel_scores</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rel_scores</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.simpledot.get_root_dir" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_root_dir</span><span class="p">()</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.simpledot.get_root_dir" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/simpledot.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_dir</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))))))</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h5 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger" class="doc doc-heading">
        <code>tagger</code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">




  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.TAGS" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">TAGS</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.TAGS" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger" class="doc doc-heading">
        <code>
Tagger            (<span title="torch.nn.modules.module.Module">Module</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Neural network for predicting the topic entities.</p>
<p>The model uses a question encoder and classifies each token using the BIO tag set.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>hidden_dim</code></td>
        <td><code>int</code></td>
        <td><p>Size of the Bi_LSTM's hidden layer</p></td>
      </tr>
      <tr>
        <td><code>diminisher</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Fine-tuning embedding layer, good for reducing Bi-LSTM's size</p></td>
      </tr>
      <tr>
        <td><code>lstm</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Bi-LSTM</p></td>
      </tr>
      <tr>
        <td><code>hidden2label</code></td>
        <td><code>nn.Module</code></td>
        <td><p>Output layer</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Tagger</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Neural network for predicting the topic entities.</span>

<span class="sd">    The model uses a question encoder and classifies each token using the BIO tag set.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        hidden_dim (int): Size of the Bi_LSTM&#39;s hidden layer</span>
<span class="sd">        diminisher (nn.Module): Fine-tuning embedding layer, good for reducing Bi-LSTM&#39;s size</span>
<span class="sd">        lstm (nn.Module): Bi-LSTM</span>
<span class="sd">        hidden2label (nn.Module): Output layer</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">        Args:</span>
<span class="sd">            emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">            hidden_dim: Hidden layer size of the Bi-LSTM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Tagger</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">hidden_dim</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">hidden_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">TAGS</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">        Args:</span>
<span class="sd">            embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">        Returns:</span>
<span class="sd">            Probabilities of each BIO tag for all tokens</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
        <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
        <span class="n">label_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
        <span class="n">label_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">label_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">label_scores</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.__init__" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Initialises all required elements of the neural network.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>emb_dim</code></td>
        <td><code>int</code></td>
        <td><p>Output size of the fine-tuning embedding layer</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>hidden_dim</code></td>
        <td><code>int</code></td>
        <td><p>Hidden layer size of the Bi-LSTM</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialises all required elements of the neural network.</span>

<span class="sd">    Args:</span>
<span class="sd">        emb_dim: Output size of the fine-tuning embedding layer</span>
<span class="sd">        hidden_dim: Hidden layer size of the Bi-LSTM</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Tagger</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden_dim</span> <span class="o">=</span> <span class="n">hidden_dim</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">emb_dim</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">LSTM</span><span class="p">(</span><span class="n">emb_dim</span><span class="p">,</span> <span class="n">hidden_dim</span><span class="p">,</span> <span class="n">bidirectional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">hidden_dim</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">TAGS</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.forward" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.Tagger.forward" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Application of the neural network on a given input question.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>embeds</code></td>
        <td><code>Tensor</code></td>
        <td><p>Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tensor</code></td>
      <td><p>Probabilities of each BIO tag for all tokens</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeds</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Application of the neural network on a given input question.</span>

<span class="sd">    Args:</span>
<span class="sd">        embeds: Tensor containing the embeddings of shape |Token| x |Batch| x |Embedding Size|</span>

<span class="sd">    Returns:</span>
<span class="sd">        Probabilities of each BIO tag for all tokens</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">embeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">diminisher</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">lstm_out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lstm</span><span class="p">(</span><span class="n">embeds</span><span class="p">)</span>
    <span class="n">label_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hidden2label</span><span class="p">(</span><span class="n">lstm_out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="n">label_scores</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">log_softmax</span><span class="p">(</span><span class="n">label_space</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">label_scores</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h6 id="adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">extract_entities</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">tag_idxs</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.neuralmodels.tagger.extract_entities" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Extracts entities using the predicted BIO tags for each token</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tokens</code></td>
        <td><code>List[str]</code></td>
        <td><p>question's tokens</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tag_idxs</code></td>
        <td><code>List[int]</code></td>
        <td><p>index of the BIO tag for each token in the question</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[List[str]]</code></td>
      <td><p>List of entities, i.e. list of connected tokens</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/neuralmodels/tagger.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_entities</span><span class="p">(</span><span class="n">tokens</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">tag_idxs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Extracts entities using the predicted BIO tags for each token</span>

<span class="sd">    Arguments:</span>
<span class="sd">        tokens: question&#39;s tokens</span>
<span class="sd">        tag_idxs: index of the BIO tag for each token in the question</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of entities, i.e. list of connected tokens</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">curr_entity</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">TAGS</span><span class="p">[</span><span class="n">tag_idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag_idx</span> <span class="ow">in</span> <span class="n">tag_idxs</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">tags</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;I&#39;</span><span class="p">:</span>
            <span class="n">curr_entity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curr_entity</span><span class="p">:</span>
                <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_entity</span><span class="p">)</span>
                <span class="n">curr_entity</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
                <span class="n">curr_entity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">curr_entity</span><span class="p">:</span>
        <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">entities</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.qa.worldknowledge.policyqa" class="doc doc-heading">
        <code>policyqa</code>



<a href="#adviser.examples.qa.worldknowledge.policyqa" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.qa.worldknowledge.policyqa.QaPolicy" class="doc doc-heading">
        <code>
QaPolicy            (<span title="services.service.Service">Service</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Policy module for question answering.</p>
<p>Provides a simple rule-based policy for question answering.
The QA module assumes that the user acts contain information about relation, topic entities
and relation direction.
Adequate answers are looked up in the knowledge and published.</p>
<p>The difference to the default HandcraftedPolicy is that no BST is needed and that multiple
system acts can be published.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/policyqa.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">QaPolicy</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Policy module for question answering.</span>

<span class="sd">    Provides a simple rule-based policy for question answering.</span>
<span class="sd">    The QA module assumes that the user acts contain information about relation, topic entities</span>
<span class="sd">    and relation direction.</span>
<span class="sd">    Adequate answers are looked up in the knowledge and published.</span>

<span class="sd">    The difference to the default HandcraftedPolicy is that no BST is needed and that multiple</span>
<span class="sd">    system acts can be published.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">()):</span>
        <span class="c1"># only call super class&#39; constructor</span>
        <span class="n">Service</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_acts&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sys_acts&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">generate_sys_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_acts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UserAct</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sys_acts</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">SysAct</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Generates system acts by looking up answers to the given user question.</span>

<span class="sd">        Args:</span>
<span class="sd">            user_acts: The list of user acts containing information about the predicted relation,</span>
<span class="sd">                topic entities and relation direction</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict with &#39;sys_acts&#39; as key and list of system acts as value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">user_acts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">Welcome</span><span class="p">)]}</span>
        <span class="k">elif</span> <span class="nb">any</span><span class="p">([</span><span class="n">user_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Bye</span> <span class="k">for</span> <span class="n">user_act</span> <span class="ow">in</span> <span class="n">user_acts</span><span class="p">]):</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">Bye</span><span class="p">)]</span> <span class="p">}</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">user_acts</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">Bad</span><span class="p">)]</span> <span class="p">}</span>

        <span class="n">user_acts</span> <span class="o">=</span> <span class="p">[</span><span class="n">user_act</span> <span class="k">for</span> <span class="n">user_act</span> <span class="ow">in</span> <span class="n">user_acts</span> <span class="k">if</span> <span class="n">user_act</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">SelectDomain</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_acts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
           <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">Welcome</span><span class="p">)]}</span> 

        <span class="n">relation</span> <span class="o">=</span> <span class="p">[</span><span class="n">user_act</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">user_act</span> <span class="ow">in</span> <span class="n">user_acts</span> \
            <span class="k">if</span> <span class="n">user_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span> <span class="ow">and</span> <span class="n">user_act</span><span class="o">.</span><span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;relation&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">topics</span> <span class="o">=</span> <span class="p">[</span><span class="n">user_act</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">user_act</span> <span class="ow">in</span> <span class="n">user_acts</span> \
            <span class="k">if</span> <span class="n">user_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span> <span class="ow">and</span> <span class="n">user_act</span><span class="o">.</span><span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;topic&#39;</span><span class="p">]</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="p">[</span><span class="n">user_act</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">user_act</span> <span class="ow">in</span> <span class="n">user_acts</span> \
            <span class="k">if</span> <span class="n">user_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span> <span class="ow">and</span> <span class="n">user_act</span><span class="o">.</span><span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;direction&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">topics</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">Bad</span><span class="p">)]</span> <span class="p">}</span>

        <span class="c1"># currently, short answers are used for world knowledge</span>
        <span class="n">answers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_short_answers</span><span class="p">(</span><span class="n">relation</span><span class="p">,</span> <span class="n">topics</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>

        <span class="n">sys_acts</span> <span class="o">=</span> <span class="p">[</span><span class="n">SysAct</span><span class="p">(</span><span class="n">SysActionType</span><span class="o">.</span><span class="n">InformByName</span><span class="p">,</span> <span class="n">slot_values</span><span class="o">=</span><span class="n">answer</span><span class="p">)</span> <span class="k">for</span> <span class="n">answer</span> <span class="ow">in</span> <span class="n">answers</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">dialog_turn</span><span class="p">(</span><span class="s2">&quot;System Action: &quot;</span> <span class="o">+</span> <span class="s1">&#39;; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">sys_act</span><span class="p">)</span> <span class="k">for</span> <span class="n">sys_act</span> <span class="ow">in</span> <span class="n">sys_acts</span><span class="p">]))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_acts&#39;</span><span class="p">:</span> <span class="n">sys_acts</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_get_short_answers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">topics</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Looks up answers and only returns the answer string&quot;&quot;&quot;</span>
        <span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
            <span class="n">triples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">find_entities</span><span class="p">({</span>
                <span class="s1">&#39;relation&#39;</span><span class="p">:</span> <span class="n">relation</span><span class="p">,</span>
                <span class="s1">&#39;topic&#39;</span><span class="p">:</span> <span class="n">topic</span><span class="p">,</span>
                <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="n">direction</span>
            <span class="p">})</span>
            <span class="k">for</span> <span class="n">triple</span> <span class="ow">in</span> <span class="n">triples</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;in&#39;</span><span class="p">:</span>
                    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="n">triple</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="n">triple</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">]})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">answers</span><span class="p">:</span>
            <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;answer&#39;</span><span class="p">:</span> <span class="s1">&#39;Sorry, I don</span><span class="se">\&#39;</span><span class="s1">t know.&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">answers</span>

    <span class="k">def</span> <span class="nf">_get_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">,</span> <span class="n">topics</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Looks up answers and stores them as triples&quot;&quot;&quot;</span>
        <span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
            <span class="n">answers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">find_entities</span><span class="p">({</span>
                <span class="s1">&#39;relation&#39;</span><span class="p">:</span> <span class="n">relation</span><span class="p">,</span>
                <span class="s1">&#39;topic&#39;</span><span class="p">:</span> <span class="n">topic</span><span class="p">,</span>
                <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="n">direction</span>
            <span class="p">}))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">answers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">:</span>
                <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;subject&#39;</span><span class="p">:</span> <span class="s1">&#39;unknown&#39;</span> <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;in&#39;</span> <span class="k">else</span> <span class="n">topic</span><span class="p">,</span>
                    <span class="s1">&#39;predicate&#39;</span><span class="p">:</span> <span class="n">relation</span><span class="p">,</span>
                    <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;unknown&#39;</span> <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="p">})</span>
        <span class="k">return</span> <span class="n">answers</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.policyqa.QaPolicy.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/policyqa.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">()):</span>
    <span class="c1"># only call super class&#39; constructor</span>
    <span class="n">Service</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.policyqa.QaPolicy.generate_sys_acts" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">generate_sys_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.policyqa.QaPolicy.generate_sys_acts" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/policyqa.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.qa.worldknowledge.semanticparser" class="doc doc-heading">
        <code>semanticparser</code>



<a href="#adviser.examples.qa.worldknowledge.semanticparser" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.qa.worldknowledge.semanticparser.QuestionParser" class="doc doc-heading">
        <code>
QuestionParser            (<span title="services.service.Service">Service</span>)
        </code>



<a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Semantic parsing module for question answering</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>device</code></td>
        <td><code>torch.device</code></td>
        <td><p>PyTorch device object, either CPU or GPU</p></td>
      </tr>
      <tr>
        <td><code>nn_relation</code></td>
        <td><code>nn.Module</code></td>
        <td><p>neural network for relation prediction</p></td>
      </tr>
      <tr>
        <td><code>nn_entity</code></td>
        <td><code>nn.Module</code></td>
        <td><p>neural network for topic entity prediction</p></td>
      </tr>
      <tr>
        <td><code>nn_direction</code></td>
        <td><code>nn.Module</code></td>
        <td><p>neural network for relation direction prediction</p></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>List[str]</code></td>
        <td><p>relation tags</p></td>
      </tr>
      <tr>
        <td><code>max_seq_len</code></td>
        <td><code>int</code></td>
        <td><p>maximum number of tokens per question</p></td>
      </tr>
      <tr>
        <td><code>embedding_creator</code></td>
        <td><code>BertEmbedding</code></td>
        <td><p>object creating BERT embeddings</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/semanticparser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">QuestionParser</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Semantic parsing module for question answering</span>

<span class="sd">    Attributes:</span>
<span class="sd">        device (torch.device): PyTorch device object, either CPU or GPU</span>
<span class="sd">        nn_relation (nn.Module): neural network for relation prediction</span>
<span class="sd">        nn_entity (nn.Module): neural network for topic entity prediction</span>
<span class="sd">        nn_direction (nn.Module): neural network for relation direction prediction</span>
<span class="sd">        tags (List[str]): relation tags</span>
<span class="sd">        max_seq_len (int): maximum number of tokens per question</span>
<span class="sd">        embedding_creator (BertEmbedding): object creating BERT embeddings</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> \
        <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">(),</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;cpu&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates neural networks for semantic parsing and other required utils</span>

<span class="sd">        Args:</span>
<span class="sd">            domain: the QA domain</span>
<span class="sd">            logger: the logger</span>
<span class="sd">            device: PyTorch device name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Service</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nn_relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_relation_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nn_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_entity_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nn_direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_direction_model</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_tag_set</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="c1"># self.embedding_creator = BertEmbedding(max_seq_length=self.max_seq_len)</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This domain is currently disabled and has to be updated.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_relation_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">SimpleDot</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;models&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;simpledot.pt&#39;</span><span class="p">),</span> <span class="n">map_location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">))</span>
        <span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">_load_entity_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Tagger</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;models&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;tagger.pt&#39;</span><span class="p">),</span> <span class="n">map_location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">))</span>
        <span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">_load_direction_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;models&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;director.pt&#39;</span><span class="p">),</span> <span class="n">map_location</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">))</span>
        <span class="n">model</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">_load_tag_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">csqa_tags</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_root_dir</span><span class="p">(),</span> <span class="s1">&#39;resources&#39;</span><span class="p">,</span> <span class="s1">&#39;ontologies&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;csqa_tags.json&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">csqa_tags</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">csqa_tags</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_utterance&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_acts&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">parse_user_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_utterance</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user_acts</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">UserAct</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Parses the user utterance.</span>

<span class="sd">        Responsible for detecting user acts with their respective slot-values from the user</span>
<span class="sd">        utterance by predicting relation, topic entities and the relation&#39;s direction.</span>

<span class="sd">        Args:</span>
<span class="sd">            user_utterance: the last user input as string</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with the key &quot;user_acts&quot; and the value containing a list of user actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">user_utterance</span> <span class="o">=</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_utterance</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;bye&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Bye</span><span class="p">)]}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_keyword</span><span class="p">()</span> <span class="ow">in</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">SelectDomain</span><span class="p">))</span>
            <span class="n">begin_idx</span> <span class="o">=</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_keyword</span><span class="p">())</span>
            <span class="n">user_utterance</span> <span class="o">=</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_keyword</span><span class="p">(),</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="p">}</span>

        <span class="n">tokens</span><span class="p">,</span> <span class="n">embeddings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preprocess_utterance</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>

        <span class="n">relation_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predict_relation</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
        <span class="n">entities_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predict_topic_entities</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
        <span class="n">direction_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predict_direction</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>

        <span class="n">relation_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_relation</span><span class="p">(</span><span class="n">relation_out</span><span class="p">)</span>
        <span class="n">entities_pred</span> <span class="o">=</span> <span class="n">extract_entities</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">entities_out</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">direction_pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_direction</span><span class="p">(</span><span class="n">direction_out</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
            <span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;relation&#39;</span><span class="p">,</span> <span class="n">relation_pred</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
            <span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">,</span> <span class="n">direction_pred</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="p">])</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">entities_pred</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;topic&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">))</span>

        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;user_acts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">dialog_turn</span><span class="p">(</span><span class="s2">&quot;User Actions: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">_preprocess_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">utterance</span><span class="p">):</span>
        <span class="n">embs_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">embedding_creator</span><span class="p">([</span><span class="n">utterance</span><span class="p">],</span> <span class="n">filter_spec_tokens</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">tokens</span><span class="p">,</span> <span class="n">embeddings</span> <span class="o">=</span> <span class="n">embs_result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">embs_result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">embeddings</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">768</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)))</span>
        <span class="n">embeddings</span> <span class="o">=</span> <span class="p">[[</span><span class="n">elem</span><span class="p">,</span> <span class="n">elem</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">embeddings</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span><span class="p">]]</span>  <span class="c1"># batch of size 1  --&gt; B x T x E</span>
        <span class="k">return</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_predict_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">):</span>
        <span class="n">rel_scores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nn_relation</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">pred_rel</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">rel_scores</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pred_rel</span>

    <span class="k">def</span> <span class="nf">_lookup_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">prediction</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

    <span class="k">def</span> <span class="nf">_predict_topic_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">):</span>
        <span class="n">ent_scores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nn_entity</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">preds_ent</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ent_scores</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">preds_ent</span>

    <span class="k">def</span> <span class="nf">_predict_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">):</span>
        <span class="n">tag_scores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nn_direction</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">preds</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">tag_scores</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">preds</span>

    <span class="k">def</span> <span class="nf">_lookup_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;out&#39;</span><span class="p">,</span> <span class="s1">&#39;in&#39;</span><span class="p">][</span><span class="nb">int</span><span class="p">(</span><span class="n">prediction</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="s1">&#39;cpu&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Creates neural networks for semantic parsing and other required utils</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>domain</code></td>
        <td><code>LookupDomain</code></td>
        <td><p>the QA domain</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>logger</code></td>
        <td><code>DiasysLogger</code></td>
        <td><p>the logger</p></td>
        <td><code>&lt;DiasysLogger adviser (NOTSET)&gt;</code></td>
      </tr>
      <tr>
        <td><code>device</code></td>
        <td><code>str</code></td>
        <td><p>PyTorch device name</p></td>
        <td><code>&#39;cpu&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/semanticparser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> \
    <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">(),</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;cpu&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates neural networks for semantic parsing and other required utils</span>

<span class="sd">    Args:</span>
<span class="sd">        domain: the QA domain</span>
<span class="sd">        logger: the logger</span>
<span class="sd">        device: PyTorch device name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Service</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_relation_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_entity_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nn_direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_direction_model</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_tag_set</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">max_seq_len</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="c1"># self.embedding_creator = BertEmbedding(max_seq_length=self.max_seq_len)</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This domain is currently disabled and has to be updated.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.parse_user_utterance" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">parse_user_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.qa.worldknowledge.semanticparser.QuestionParser.parse_user_utterance" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/semanticparser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h5 id="adviser.examples.qa.worldknowledge.semanticparser.get_root_dir" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_root_dir</span><span class="p">()</span></code>


<a href="#adviser.examples.qa.worldknowledge.semanticparser.get_root_dir" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/qa/worldknowledge/semanticparser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_dir</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))))</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h2 id="adviser.examples.webapi" class="doc doc-heading">
        <code>webapi</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="adviser.examples.webapi.mensa" class="doc doc-heading">
        <code>mensa</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.mensa.domain" class="doc doc-heading">
        <code>domain</code>



<a href="#adviser.examples.webapi.mensa.domain" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="adviser.examples.webapi.mensa.domain.SLOT_VALUES" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">SLOT_VALUES</span></code>


<a href="#adviser.examples.webapi.mensa.domain.SLOT_VALUES" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.domain.MensaDomain" class="doc doc-heading">
        <code>
MensaDomain            (<span title="utils.domain.lookupdomain.LookupDomain">LookupDomain</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.domain.MensaDomain" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Domain for the Mensa API</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>parser</code></td>
        <td><code>MensaParser</code></td>
        <td><p>HTML file parser for dynamically building a pseudo database</p></td>
      </tr>
      <tr>
        <td><code>last_results</code></td>
        <td><code>List[dict]</code></td>
        <td><p>Current results which the user might request info about</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MensaDomain</span><span class="p">(</span><span class="n">LookupDomain</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Domain for the Mensa API</span>

<span class="sd">    Attributes:</span>
<span class="sd">        parser (MensaParser): HTML file parser for dynamically building a pseudo database</span>
<span class="sd">        last_results (List[dict]): Current results which the user might request info about</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;MensaAPI&#39;</span><span class="p">,</span> <span class="s1">&#39;Mensa Food&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">MensaParser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
        <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                                If empty, all entities in the database will be returned.</span>
<span class="sd">            requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                        system requestable slots and the primary key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;day&#39;</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
            <span class="n">meals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">get_meals</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">])</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">meal</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">meal</span> <span class="ow">in</span> <span class="n">meals</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;day&#39;</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">candidate</span> <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="n">candidate</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="o">==</span> <span class="n">constraints</span><span class="p">[</span><span class="n">slot</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
                <span class="n">result</span><span class="p">[</span><span class="s1">&#39;artificial_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
            <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">requested_slots</span><span class="p">):</span>
                <span class="n">cleaned_results</span> <span class="o">=</span> <span class="p">[{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span> <span class="k">for</span> <span class="n">result_dict</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cleaned_results</span> <span class="o">=</span> <span class="n">results</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="n">results</span>
            <span class="k">return</span> <span class="n">cleaned_results</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">            specified entity.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (str): primary key value of the entity</span>
<span class="sd">            requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;artificial_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity_id</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;allergens&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all default Inform slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">        Args:</span>
<span class="sd">            slot (str): name of the slot</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list of strings, each string representing one possible value for</span>
<span class="sd">            the specified slot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">SLOT_VALUES</span>
        <span class="k">return</span> <span class="n">SLOT_VALUES</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>

    <span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;mensa&#39;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;MensaAPI&#39;</span><span class="p">,</span> <span class="s1">&#39;Mensa Food&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">MensaParser</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.find_entities" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">requested_slots</span><span class="o">=&lt;</span><span class="n">tuple_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fedd65b7f40</span><span class="o">&gt;</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_entities" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all entities from the data backend that meet the constraints.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>constraints</code></td>
        <td><code>dict</code></td>
        <td><p>Slot-value mapping of constraints.
                If empty, all entities in the database will be returned.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>requested_slots</code></td>
        <td><code>Iterable</code></td>
        <td><p>list of slots that should be returned in addition to the
                        system requestable slots and the primary key</p></td>
        <td><code>&lt;tuple_iterator object at 0x7fedd65b7f40&gt;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
    <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                            If empty, all entities in the database will be returned.</span>
<span class="sd">        requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                    system requestable slots and the primary key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;day&#39;</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="n">meals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">get_meals</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">])</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">meal</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">meal</span> <span class="ow">in</span> <span class="n">meals</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;day&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">candidate</span> <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="n">candidate</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="o">==</span> <span class="n">constraints</span><span class="p">[</span><span class="n">slot</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;artificial_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">requested_slots</span><span class="p">):</span>
            <span class="n">cleaned_results</span> <span class="o">=</span> <span class="p">[{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span> <span class="k">for</span> <span class="n">result_dict</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cleaned_results</span> <span class="o">=</span> <span class="n">results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="n">results</span>
        <span class="k">return</span> <span class="n">cleaned_results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.find_info_about_entity" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>entity_id</code></td>
        <td><code>str</code></td>
        <td><p>primary key value of the entity</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>requested_slots</code></td>
        <td><code>dict</code></td>
        <td><p>slot-value mapping of constraints</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;artificial_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity_id</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_default_inform_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_default_inform_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all default Inform slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all default Inform slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_informable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all informable slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_keyword" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_keyword" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;mensa&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_mandatory_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all mandatory slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_possible_values" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all possible values for an informable slot</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>slot</code></td>
        <td><code>str</code></td>
        <td><p>name of the slot</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>a list of strings, each string representing one possible value for
the specified slot.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">SLOT_VALUES</span>
    <span class="k">return</span> <span class="n">SLOT_VALUES</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_primary_key" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the slot name that will be used as the 'name' of an entry </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the user. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;allergens&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.domain.MensaDomain.get_system_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the system. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;vegan&#39;</span><span class="p">,</span> <span class="s1">&#39;vegetarian&#39;</span><span class="p">,</span> <span class="s1">&#39;fish&#39;</span><span class="p">,</span> <span class="s1">&#39;pork&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.mensa.nlu" class="doc doc-heading">
        <code>nlu</code>



<a href="#adviser.examples.webapi.mensa.nlu" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.nlu.MensaNLU" class="doc doc-heading">
        <code>
MensaNLU            (<span title="services.nlu.nlu.HandcraftedNLU">HandcraftedNLU</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.nlu.MensaNLU" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Adapted handcrafted NLU for the mensa domain.</p>
<p>The default handcrafted NLU is adapted to automatically add the user act request(name).
This is necessary because the name is not the primary key, i.e. it is not printed by default
once an element is found. To force the Policy to automatically inform about the name, too,
a request for the name is added in each turn.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MensaNLU</span><span class="p">(</span><span class="n">HandcraftedNLU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adapted handcrafted NLU for the mensa domain.</span>

<span class="sd">    The default handcrafted NLU is adapted to automatically add the user act request(name).</span>
<span class="sd">    This is necessary because the name is not the primary key, i.e. it is not printed by default</span>
<span class="sd">    once an element is found. To force the Policy to automatically inform about the name, too,</span>
<span class="sd">    a request for the name is added in each turn.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">()):</span>
        <span class="c1"># only calls super class&#39; constructor</span>
        <span class="n">HandcraftedNLU</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_utterance&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_acts&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">extract_user_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_utterance</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sys_act</span><span class="p">:</span> <span class="n">SysAct</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">beliefstate</span><span class="p">:</span> <span class="n">BeliefState</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> \
            <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user_acts</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">UserAct</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Original code but adapted to automatically add a request(name) act&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Setting request everything to False at every turn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">req_everything</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># slots_requested &amp; slots_informed store slots requested and informed in this turn</span>
        <span class="c1"># they are used later for later disambiguation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slots_requested</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots_informed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">user_utterance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">user_utterance</span> <span class="o">=</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_match_general_act</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_match_domain_specific_act</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>

        <span class="c1"># Solving ambiguities from regexes, especially with requests and informs happening</span>
        <span class="c1"># simultaneously on the same slot and two slots taking the same value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disambiguate_co_occurrence</span><span class="p">(</span><span class="n">beliefstate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solve_informable_values</span><span class="p">()</span>

        <span class="c1"># If nothing else has been matched, see if the user chose a domain; otherwise if it&#39;s</span>
        <span class="c1"># not the first turn, it&#39;s a bad act</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">get_keyword</span><span class="p">()</span> <span class="ow">in</span> <span class="n">user_utterance</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">user_utterance</span> <span class="k">if</span> <span class="n">user_utterance</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                              <span class="n">act_type</span><span class="o">=</span><span class="n">UserActionType</span><span class="o">.</span><span class="n">SelectDomain</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">sys_act_info</span><span class="p">[</span><span class="s1">&#39;last_act&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># start of dialogue or no regex matched</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">user_utterance</span> <span class="k">if</span> <span class="n">user_utterance</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                              <span class="n">act_type</span><span class="o">=</span><span class="n">UserActionType</span><span class="o">.</span><span class="n">Bad</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_assign_scores</span><span class="p">()</span>
        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;user_acts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">dialog_turn</span><span class="p">(</span><span class="s2">&quot;User Actions: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_acts</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.nlu.MensaNLU.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">:</span> <span class="n">LookupDomain</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">DiasysLogger</span> <span class="o">=</span> <span class="n">DiasysLogger</span><span class="p">()):</span>
    <span class="c1"># only calls super class&#39; constructor</span>
    <span class="n">HandcraftedNLU</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.nlu.MensaNLU.extract_user_acts" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">extract_user_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.nlu.MensaNLU.extract_user_acts" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.mensa.parser" class="doc doc-heading">
        <code>parser</code>



<a href="#adviser.examples.webapi.mensa.parser" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.Allergen" class="doc doc-heading">
        <code>
Allergen            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.parser.Allergen" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>This enum provides the allergens used in the mensa menu.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Allergen</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;This enum provides the allergens used in the mensa menu.&quot;&quot;&quot;</span>

	<span class="n">Egg</span> <span class="o">=</span> <span class="s1">&#39;Ei&#39;</span>
	<span class="n">Peanut</span> <span class="o">=</span> <span class="s1">&#39;En&#39;</span>
	<span class="n">Fish</span> <span class="o">=</span> <span class="s1">&#39;Fi&#39;</span>
	<span class="n">Wheat</span> <span class="o">=</span> <span class="s1">&#39;GlW&#39;</span>
	<span class="n">Spelt</span> <span class="o">=</span> <span class="s1">&#39;GlD&#39;</span>
	<span class="n">KhorasanWheat</span> <span class="o">=</span> <span class="s1">&#39;GlKW&#39;</span>
	<span class="n">Rye</span> <span class="o">=</span> <span class="s1">&#39;GlR&#39;</span>
	<span class="n">Barley</span> <span class="o">=</span> <span class="s1">&#39;GlG&#39;</span>
	<span class="n">Millet</span> <span class="o">=</span> <span class="s1">&#39;GlH&#39;</span>
	<span class="n">Shellfishes</span> <span class="o">=</span> <span class="s1">&#39;Kr&#39;</span>
	<span class="n">Lactose</span> <span class="o">=</span> <span class="s1">&#39;La&#39;</span>
	<span class="n">Lupin</span> <span class="o">=</span> <span class="s1">&#39;Lu&#39;</span>
	<span class="n">Almonds</span> <span class="o">=</span> <span class="s1">&#39;NuM&#39;</span>
	<span class="n">Hazelnuts</span> <span class="o">=</span> <span class="s1">&#39;NuH&#39;</span>
	<span class="n">Walnuts</span> <span class="o">=</span> <span class="s1">&#39;NuW&#39;</span>
	<span class="n">Cashews</span> <span class="o">=</span> <span class="s1">&#39;NuC&#39;</span>
	<span class="n">Pecan</span> <span class="o">=</span> <span class="s1">&#39;NuPe&#39;</span>
	<span class="n">BrazilNut</span> <span class="o">=</span> <span class="s1">&#39;NuPa&#39;</span>
	<span class="n">Pistachio</span> <span class="o">=</span> <span class="s1">&#39;NuPi&#39;</span>
	<span class="n">Macadamia</span> <span class="o">=</span> <span class="s1">&#39;NuMa&#39;</span>
	<span class="n">Sesame</span> <span class="o">=</span> <span class="s1">&#39;Se&#39;</span>
	<span class="n">Mustard</span> <span class="o">=</span> <span class="s1">&#39;Sf&#39;</span>
	<span class="n">Celery</span> <span class="o">=</span> <span class="s1">&#39;Sl&#39;</span>
	<span class="n">Soy</span> <span class="o">=</span> <span class="s1">&#39;So&#39;</span>
	<span class="n">Sulfite</span> <span class="o">=</span> <span class="s1">&#39;Sw&#39;</span>
	<span class="n">Mollusca</span> <span class="o">=</span> <span class="s1">&#39;Wt&#39;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Almonds" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Almonds</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Almonds" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Barley" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Barley</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Barley" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.BrazilNut" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">BrazilNut</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.BrazilNut" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Cashews" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Cashews</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Cashews" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Celery" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Celery</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Celery" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Egg" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Egg</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Egg" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Fish" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Fish</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Fish" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Hazelnuts" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Hazelnuts</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Hazelnuts" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.KhorasanWheat" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">KhorasanWheat</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.KhorasanWheat" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Lactose" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Lactose</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Lactose" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Lupin" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Lupin</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Lupin" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Macadamia" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Macadamia</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Macadamia" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Millet" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Millet</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Millet" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Mollusca" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Mollusca</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Mollusca" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Mustard" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Mustard</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Mustard" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Peanut" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Peanut</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Peanut" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Pecan" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Pecan</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Pecan" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Pistachio" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Pistachio</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Pistachio" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Rye" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Rye</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Rye" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Sesame" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Sesame</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Sesame" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Shellfishes" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Shellfishes</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Shellfishes" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Soy" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Soy</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Soy" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Spelt" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Spelt</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Spelt" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Sulfite" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Sulfite</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Sulfite" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Walnuts" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Walnuts</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Walnuts" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Allergen.Wheat" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Wheat</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Allergen.Wheat" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.DishType" class="doc doc-heading">
        <code>
DishType            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.parser.DishType" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>This enum provides the dish types used in the mensa menu.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">DishType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;This enum provides the dish types used in the mensa menu.&quot;&quot;&quot;</span>

	<span class="n">Starter</span> <span class="o">=</span> <span class="s1">&#39;starter&#39;</span>
	<span class="n">Buffet</span> <span class="o">=</span> <span class="s1">&#39;buffet&#39;</span>
	<span class="n">MainDish</span> <span class="o">=</span> <span class="s1">&#39;main_dish&#39;</span>
	<span class="n">SideDish</span> <span class="o">=</span> <span class="s1">&#39;side_dish&#39;</span>
	<span class="n">Dessert</span> <span class="o">=</span> <span class="s1">&#39;dessert&#39;</span>

	<span class="nd">@staticmethod</span>
	<span class="k">def</span> <span class="nf">from_website_name</span><span class="p">(</span><span class="n">website_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;DishType&#39;</span><span class="p">:</span>
		<span class="sd">&quot;&quot;&quot;Converts the type as listed on the website into the type used in the dialog system.</span>

<span class="sd">		Args:</span>
<span class="sd">			website_name: The name as used in the response to the POST request.</span>

<span class="sd">		Returns:</span>
<span class="sd">			The corresponding enum member.</span>

<span class="sd">		&quot;&quot;&quot;</span>


		<span class="k">if</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">&#39;STARTER&#39;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Starter</span>
		<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">&#39;BUFFET&#39;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Buffet</span>
		<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">&#39;MAIN DISH&#39;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">MainDish</span>
		<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">&#39;SIDE DISH&#39;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">SideDish</span>
		<span class="k">elif</span> <span class="n">website_name</span> <span class="o">==</span> <span class="s1">&#39;DESSERT&#39;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">DishType</span><span class="o">.</span><span class="n">Dessert</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.DishType.Buffet" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Buffet</span></code>


<a href="#adviser.examples.webapi.mensa.parser.DishType.Buffet" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.DishType.Dessert" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Dessert</span></code>


<a href="#adviser.examples.webapi.mensa.parser.DishType.Dessert" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.DishType.MainDish" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">MainDish</span></code>


<a href="#adviser.examples.webapi.mensa.parser.DishType.MainDish" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.DishType.SideDish" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">SideDish</span></code>


<a href="#adviser.examples.webapi.mensa.parser.DishType.SideDish" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.DishType.Starter" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">Starter</span></code>


<a href="#adviser.examples.webapi.mensa.parser.DishType.Starter" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.Location" class="doc doc-heading">
        <code>
Location            (<span title="enum.Enum">Enum</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.parser.Location" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>This enum provides the possible mensa locations.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;This enum provides the possible mensa locations.&quot;&quot;&quot;</span>

	<span class="n">STUTTGART_MITTE</span> <span class="o">=</span> <span class="mi">3</span>
	<span class="n">MUSIKHOCHSCHULE</span> <span class="o">=</span> <span class="mi">4</span>
	<span class="n">KUNSTAKADEMIE</span> <span class="o">=</span> <span class="mi">7</span>
	<span class="n">STUTTGART_VAIHINGEN</span> <span class="o">=</span> <span class="mi">2</span>
	<span class="n">LUDWIGSBURG</span> <span class="o">=</span> <span class="mi">1</span>
	<span class="n">FLANDERNSTRASSE</span> <span class="o">=</span> <span class="mi">6</span>
	<span class="n">ESSLINGEN_STADTMITTE</span> <span class="o">=</span> <span class="mi">9</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.ESSLINGEN_STADTMITTE" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">ESSLINGEN_STADTMITTE</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.ESSLINGEN_STADTMITTE" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.FLANDERNSTRASSE" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">FLANDERNSTRASSE</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.FLANDERNSTRASSE" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.KUNSTAKADEMIE" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">KUNSTAKADEMIE</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.KUNSTAKADEMIE" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.LUDWIGSBURG" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">LUDWIGSBURG</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.LUDWIGSBURG" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.MUSIKHOCHSCHULE" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">MUSIKHOCHSCHULE</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.MUSIKHOCHSCHULE" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.STUTTGART_MITTE" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">STUTTGART_MITTE</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_MITTE" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h6 id="adviser.examples.webapi.mensa.parser.Location.STUTTGART_VAIHINGEN" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">STUTTGART_VAIHINGEN</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Location.STUTTGART_VAIHINGEN" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

    </div>

  </div>








  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.Meal" class="doc doc-heading">
        <code>
Meal        </code>



<a href="#adviser.examples.webapi.mensa.parser.Meal" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Meal</span><span class="p">():</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">price_quantity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>\
		<span class="n">allergens</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="n">Allergen</span><span class="p">],</span> <span class="n">vegan</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">fish</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">pork</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>\
			<span class="n">dish_type</span><span class="p">:</span> <span class="n">DishType</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;The class for a  meal consisting of a name and several properties (slot-value pairs).</span>

<span class="sd">		Args:</span>
<span class="sd">			name: The name of the meal.</span>
<span class="sd">			day: The day on which the meal is offered.</span>
<span class="sd">			prices: The price for students and guests.</span>
<span class="sd">			price_quantity: The unit for which the price is valid.</span>
<span class="sd">			allergens: The allergens of this meal.</span>
<span class="sd">			vegan: Whether the meal is vegan or not.</span>
<span class="sd">			vegetarian: Whether the meal is vegetarian or not.</span>
<span class="sd">			fish: Whether the meal contains fish or not.</span>
<span class="sd">			pork: Whether the meal contains pork or not.</span>
<span class="sd">			dish_type: The type of the dish. (Starter, Buffet, Main Dish, Side Dish or Buffet)</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prices</span> <span class="o">=</span> <span class="n">prices</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span> <span class="o">=</span> <span class="n">price_quantity</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="o">=</span> <span class="n">allergens</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vegan</span> <span class="o">=</span> <span class="n">vegan</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span> <span class="o">=</span> <span class="n">vegetarian</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">fish</span> <span class="o">=</span> <span class="n">fish</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pork</span> <span class="o">=</span> <span class="n">pork</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span> <span class="o">=</span> <span class="n">dish_type</span>


	<span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
		<span class="sd">&quot;&quot;&quot;A dict representation of the meal.&quot;&quot;&quot;</span>

		<span class="k">return</span> <span class="p">{</span>
			<span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
			<span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
			<span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
			<span class="s1">&#39;allergens&#39;</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">allergen</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">allergen</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="p">])</span> <span class="k">if</span>\
				<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
			<span class="s1">&#39;vegan&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
			<span class="s1">&#39;vegetarian&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
			<span class="s1">&#39;fish&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
			<span class="s1">&#39;pork&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
			<span class="p">}</span>

	<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
		<span class="sd">&quot;&quot;&quot;The string representation of the meal.&quot;&quot;&quot;</span>

		<span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Meal(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, day=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2">, prices=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">			price_quantity=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span><span class="si">}</span><span class="s2">, &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;allergens=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="si">}</span><span class="s2">, vegan=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="si">}</span><span class="s2">, vegetarian=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="si">}</span><span class="s2">, &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;fish=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="si">}</span><span class="s2">, pork=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="si">}</span><span class="s2">, dish_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
		<span class="sd">&quot;&quot;&quot;The string representation of the meal.&quot;&quot;&quot;</span>

		<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.Meal.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">price_quantity</span><span class="p">,</span> <span class="n">allergens</span><span class="p">,</span> <span class="n">vegan</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">,</span> <span class="n">fish</span><span class="p">,</span> <span class="n">pork</span><span class="p">,</span> <span class="n">dish_type</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.parser.Meal.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The class for a  meal consisting of a name and several properties (slot-value pairs).</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the meal.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>day</code></td>
        <td><code>str</code></td>
        <td><p>The day on which the meal is offered.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>prices</code></td>
        <td><code>Tuple[float]</code></td>
        <td><p>The price for students and guests.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>price_quantity</code></td>
        <td><code>str</code></td>
        <td><p>The unit for which the price is valid.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>allergens</code></td>
        <td><code>List[adviser.examples.webapi.mensa.parser.Allergen]</code></td>
        <td><p>The allergens of this meal.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vegan</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the meal is vegan or not.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vegetarian</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the meal is vegetarian or not.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fish</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the meal contains fish or not.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pork</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the meal contains pork or not.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dish_type</code></td>
        <td><code>DishType</code></td>
        <td><p>The type of the dish. (Starter, Buffet, Main Dish, Side Dish or Buffet)</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">price_quantity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>\
	<span class="n">allergens</span><span class="p">:</span><span class="n">List</span><span class="p">[</span><span class="n">Allergen</span><span class="p">],</span> <span class="n">vegan</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">fish</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">pork</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>\
		<span class="n">dish_type</span><span class="p">:</span> <span class="n">DishType</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;The class for a  meal consisting of a name and several properties (slot-value pairs).</span>

<span class="sd">	Args:</span>
<span class="sd">		name: The name of the meal.</span>
<span class="sd">		day: The day on which the meal is offered.</span>
<span class="sd">		prices: The price for students and guests.</span>
<span class="sd">		price_quantity: The unit for which the price is valid.</span>
<span class="sd">		allergens: The allergens of this meal.</span>
<span class="sd">		vegan: Whether the meal is vegan or not.</span>
<span class="sd">		vegetarian: Whether the meal is vegetarian or not.</span>
<span class="sd">		fish: Whether the meal contains fish or not.</span>
<span class="sd">		pork: Whether the meal contains pork or not.</span>
<span class="sd">		dish_type: The type of the dish. (Starter, Buffet, Main Dish, Side Dish or Buffet)</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">day</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">prices</span> <span class="o">=</span> <span class="n">prices</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span> <span class="o">=</span> <span class="n">price_quantity</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="o">=</span> <span class="n">allergens</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vegan</span> <span class="o">=</span> <span class="n">vegan</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span> <span class="o">=</span> <span class="n">vegetarian</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">fish</span> <span class="o">=</span> <span class="n">fish</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">pork</span> <span class="o">=</span> <span class="n">pork</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span> <span class="o">=</span> <span class="n">dish_type</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.Meal.__repr__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.parser.Meal.__repr__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The string representation of the meal.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="sd">&quot;&quot;&quot;The string representation of the meal.&quot;&quot;&quot;</span>

	<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.Meal.__str__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.parser.Meal.__str__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The string representation of the meal.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="sd">&quot;&quot;&quot;The string representation of the meal.&quot;&quot;&quot;</span>

	<span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Meal(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, day=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="si">}</span><span class="s2">, prices=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="si">}</span><span class="s2">,</span><span class="se">\</span>
<span class="s2">		price_quantity=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">price_quantity</span><span class="si">}</span><span class="s2">, &quot;</span>
		<span class="sa">f</span><span class="s2">&quot;allergens=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="si">}</span><span class="s2">, vegan=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="si">}</span><span class="s2">, vegetarian=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="si">}</span><span class="s2">, &quot;</span>
		<span class="sa">f</span><span class="s2">&quot;fish=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="si">}</span><span class="s2">, pork=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="si">}</span><span class="s2">, dish_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.Meal.as_dict" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.parser.Meal.as_dict" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>A dict representation of the meal.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
	<span class="sd">&quot;&quot;&quot;A dict representation of the meal.&quot;&quot;&quot;</span>

	<span class="k">return</span> <span class="p">{</span>
		<span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
		<span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
		<span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dish_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
		<span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
		<span class="s1">&#39;allergens&#39;</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">allergen</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">allergen</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allergens</span><span class="p">])</span> <span class="k">if</span>\
			<span class="bp">self</span><span class="o">.</span><span class="n">allergens</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
		<span class="s1">&#39;vegan&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegan</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">&#39;vegetarian&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vegetarian</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">&#39;fish&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fish</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
		<span class="s1">&#39;pork&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pork</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
		<span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.MensaParser" class="doc doc-heading">
        <code>
MensaParser        </code>



<a href="#adviser.examples.webapi.mensa.parser.MensaParser" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MensaParser</span><span class="p">():</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		The class to issue post requests and parse the response. Will also take care of caching the</span>
<span class="sd">		parser&#39;s results.</span>

<span class="sd">		Args:</span>
<span class="sd">			cache (bool): Whether to cache results or not.</span>

<span class="sd">		&quot;&quot;&quot;</span>

		<span class="c1">#: dict of str: storgae to cache parsed meals</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>

	<span class="k">def</span> <span class="nf">_parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Meal</span><span class="p">]:</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Issues a request for the given date. The response will be parsed and a list of meals</span>
<span class="sd">		returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            date: The date for which the data will be parsed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of Meal: List of parsed meals</span>

<span class="sd">        &quot;&quot;&quot;</span>

		<span class="n">date_str</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
		<span class="n">date_next_week_str</span> <span class="o">=</span> <span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

		<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="s1">&#39;make_spl&#39;</span><span class="p">,</span>
		<span class="c1"># currently we stick with only one mensa location</span>
		<span class="s1">&#39;locId&#39;</span><span class="p">:</span> <span class="n">Location</span><span class="o">.</span><span class="n">STUTTGART_VAIHINGEN</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
		<span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">date_str</span><span class="p">,</span>
		<span class="s1">&#39;lang&#39;</span><span class="p">:</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span>
		<span class="s1">&#39;startThisWeek&#39;</span><span class="p">:</span> <span class="n">date_str</span><span class="p">,</span>
		<span class="s1">&#39;startNextWeek&#39;</span><span class="p">:</span> <span class="n">date_next_week_str</span>
		<span class="p">}</span>

		<span class="c1"># issue post request</span>
		<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://sws2.maxmanager.xyz/inc/ajax-php_konnektor.inc.php&#39;</span><span class="p">,</span>\
			<span class="n">headers</span><span class="o">=</span><span class="p">{},</span> <span class="n">cookies</span><span class="o">=</span><span class="p">{},</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
		<span class="n">tree</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">encoding</span><span class="p">))</span>
		<span class="n">meals</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_meal</span><span class="p">(</span><span class="n">meal</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%A&#39;</span><span class="p">))</span> <span class="k">for</span> <span class="n">meal</span> <span class="ow">in</span>\
			<span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[contains(@class, &quot;splMeal&quot;)]&#39;</span><span class="p">)]</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="o">=</span> <span class="n">meals</span>

		<span class="k">return</span> <span class="n">meals</span>

	<span class="k">def</span> <span class="nf">_parse_meal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">meal</span><span class="p">:</span> <span class="n">html</span><span class="o">.</span><span class="n">HtmlElement</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Meal</span><span class="p">:</span>
		<span class="sd">&quot;&quot;&quot;Parse all necessary properties of a meal from html.</span>

<span class="sd">		Args:</span>
<span class="sd">			meal: The html.HtmlElement which will be parsed.</span>
<span class="sd">			day: The day for which this meal is valid.</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="c1"># name</span>
		<span class="n">name</span> <span class="o">=</span> <span class="n">meal</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./div[1]/span/text()&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
		<span class="c1"># price &amp; quantity</span>
		<span class="n">div_price</span> <span class="o">=</span>\
			<span class="n">meal</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./div[4]/div[1]/text()[preceding-sibling::br or following-sibling::br]&#39;</span><span class="p">)</span>
		<span class="n">prices</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d*,\d*).*?(\d*,\d*)&#39;</span><span class="p">,</span> <span class="n">div_price</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
		<span class="c1"># substitute comma by dot to correctly parse float</span>
		<span class="n">prices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">price</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)),</span> <span class="n">prices</span><span class="p">))</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">div_price</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
			<span class="n">price_quantity</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\(per (\d*.?)\)&#39;</span><span class="p">,</span> <span class="n">div_price</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">price_quantity</span> <span class="o">=</span> <span class="s2">&quot;plate&quot;</span>
		<span class="c1"># allergens</span>
		<span class="n">allergens</span> <span class="o">=</span> <span class="n">meal</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./div[3]/div[1]/div[contains(@class, &quot;azn&quot;) and</span><span class="se">\</span>
<span class="s1">			not(contains(@class, &quot;ptr&quot;)) and</span><span class="se">\</span>
<span class="s1">				not(contains(./preceding-sibling::div/@class, &quot;hidden&quot;))]/text()&#39;</span><span class="p">)</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">allergens</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
			<span class="c1"># allergens are included</span>
			<span class="n">allergens</span> <span class="o">=</span> <span class="p">[</span><span class="n">Allergen</span><span class="p">(</span><span class="n">allergen</span><span class="p">)</span> <span class="k">for</span> <span class="n">allergen</span> <span class="ow">in</span> <span class="n">allergens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;()&#39;</span><span class="p">)</span>\
				<span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">allergen</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">allergen</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">12</span><span class="p">)))]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># there are no allergens</span>
			<span class="n">allergens</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="c1"># some tags / binary slots</span>
		<span class="n">tags</span> <span class="o">=</span> <span class="n">meal</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./div[4]/div[2]/img/@title&#39;</span><span class="p">)</span>
		<span class="n">vegan</span> <span class="o">=</span> <span class="s1">&#39;vegan&#39;</span> <span class="ow">in</span> <span class="n">tags</span>
		<span class="n">vegetarian</span> <span class="o">=</span> <span class="s1">&#39;vegetarian&#39;</span> <span class="ow">in</span> <span class="n">tags</span>
		<span class="n">fish</span> <span class="o">=</span> <span class="s1">&#39;MSC (MSC-C-51632)&#39;</span> <span class="ow">in</span> <span class="n">tags</span>
		<span class="n">pork</span> <span class="o">=</span> <span class="s1">&#39;pork&#39;</span> <span class="ow">in</span> <span class="n">tags</span> <span class="ow">or</span> <span class="s1">&#39;beef/pork&#39;</span> <span class="ow">in</span> <span class="n">tags</span>
		<span class="n">dish_type</span> <span class="o">=</span> <span class="n">meal</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./preceding-sibling::div[contains(@class, &quot;gruppenkopf&quot;)][1]</span><span class="se">\</span>
<span class="s1">			/div[contains(@class, &quot;gruppenname&quot;)]/text()&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

		<span class="k">return</span> <span class="n">Meal</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">price_quantity</span><span class="p">,</span> <span class="n">allergens</span><span class="p">,</span> <span class="n">vegan</span><span class="p">,</span> <span class="n">vegetarian</span><span class="p">,</span> <span class="n">fish</span><span class="p">,</span> <span class="n">pork</span><span class="p">,</span>\
			<span class="n">DishType</span><span class="o">.</span><span class="n">from_website_name</span><span class="p">(</span><span class="n">dish_type</span><span class="p">))</span>

	<span class="k">def</span> <span class="nf">_parse_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
		<span class="sd">&quot;&quot;&quot;Parse the given string as date. Allowed is a date given as Y-m-d or one of today,</span>
<span class="sd">		tomorrow and monday-sunday.</span>

<span class="sd">		Raises:</span>
<span class="sd">			ParseDateError: If ``date`` could not be parsed.</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># try to parse date</span>
			<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="c1"># cover some specific cases, e.g. today, tomorrow, wednesday</span>
			<span class="n">weekdays</span> <span class="o">=</span>\
				<span class="p">[</span><span class="s1">&#39;monday&#39;</span><span class="p">,</span> <span class="s1">&#39;tuesday&#39;</span><span class="p">,</span> <span class="s1">&#39;wednesday&#39;</span><span class="p">,</span> <span class="s1">&#39;thursday&#39;</span><span class="p">,</span> <span class="s1">&#39;friday&#39;</span><span class="p">,</span> <span class="s1">&#39;saturday&#39;</span><span class="p">,</span> <span class="s1">&#39;sunday&#39;</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;today&#39;</span><span class="p">:</span>
				<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
			<span class="k">elif</span> <span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;tomorrow&#39;</span><span class="p">:</span>
				<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">date</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">weekdays</span><span class="p">:</span>
				<span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
				<span class="n">weekday</span> <span class="o">=</span> <span class="n">weekdays</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
				<span class="k">if</span> <span class="n">weekday</span> <span class="o">&lt;=</span> <span class="n">today</span><span class="p">:</span>
					<span class="c1"># if today is named shall we consider the weekday next week instead? (&lt;= vs. &lt;)</span>
					<span class="n">weekday</span> <span class="o">+=</span> <span class="mi">7</span>
				<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">weekday</span><span class="o">-</span><span class="n">today</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">ParseDateError</span>

		<span class="k">return</span> <span class="n">date</span>

	<span class="k">def</span> <span class="nf">get_meals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Meal</span><span class="p">]:</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Gets the meals for a specified day by either looking them up in the cache or by issuing and</span>
<span class="sd">		parsing a post request.</span>

<span class="sd">		Args:</span>
<span class="sd">            date (str): The date for which the data will be returned.</span>
<span class="sd">				Can be a string in the format &#39;Y-m-d&#39; or one of today, tomorrow and monday-sunday.</span>
<span class="sd">            use_cache (bool): If False will always query the server instead of using the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of Meal: List of meals for specified date</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">use_cache</span> <span class="ow">and</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span>
			<span class="c1"># NOTE data could be deprecated</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># issue request to server</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.MensaParser.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.mensa.parser.MensaParser.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>The class to issue post requests and parse the response. Will also take care of caching the
parser's results.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>cache</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to cache results or not.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	The class to issue post requests and parse the response. Will also take care of caching the</span>
<span class="sd">	parser&#39;s results.</span>

<span class="sd">	Args:</span>
<span class="sd">		cache (bool): Whether to cache results or not.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="c1">#: dict of str: storgae to cache parsed meals</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">cache</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.mensa.parser.MensaParser.get_meals" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_meals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">use_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.mensa.parser.MensaParser.get_meals" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <div class="codehilite"><pre><span></span><code>    Gets the meals for a specified day by either looking them up in the cache or by issuing and
    parsing a post request.

    Args:
date (str): The date for which the data will be returned.
                    Can be a string in the format &#39;Y-m-d&#39; or one of today, tomorrow and monday-sunday.
use_cache (bool): If False will always query the server instead of using the cache.
</code></pre></div>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td><p>obj:<code>list</code> of Meal: List of meals for specified date</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code>	<span class="k">def</span> <span class="nf">get_meals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Meal</span><span class="p">]:</span>
		<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Gets the meals for a specified day by either looking them up in the cache or by issuing and</span>
<span class="sd">		parsing a post request.</span>

<span class="sd">		Args:</span>
<span class="sd">            date (str): The date for which the data will be returned.</span>
<span class="sd">				Can be a string in the format &#39;Y-m-d&#39; or one of today, tomorrow and monday-sunday.</span>
<span class="sd">            use_cache (bool): If False will always query the server instead of using the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of Meal: List of meals for specified date</span>
<span class="sd">		&quot;&quot;&quot;</span>

		<span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">use_cache</span> <span class="ow">and</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span>
			<span class="c1"># NOTE data could be deprecated</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">[</span><span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># issue request to server</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.mensa.parser.ParseDateError" class="doc doc-heading">
        <code>
ParseDateError            (<span title="Exception">Exception</span>)
        </code>



<a href="#adviser.examples.webapi.mensa.parser.ParseDateError" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>This exception is raised when the date cannot be parsed.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/mensa/parser.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ParseDateError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;This exception is raised when the date cannot be parsed.&quot;&quot;&quot;</span>
	<span class="k">pass</span>
</code></pre></div>
        </details>


    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="adviser.examples.webapi.weather" class="doc doc-heading">
        <code>weather</code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.weather" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.weather.domain" class="doc doc-heading">
        <code>domain</code>



<a href="#adviser.examples.webapi.weather.domain" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="adviser.examples.webapi.weather.domain.API_KEY" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">API_KEY</span></code>


<a href="#adviser.examples.webapi.weather.domain.API_KEY" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.weather.domain.WeatherDomain" class="doc doc-heading">
        <code>
WeatherDomain            (<span title="utils.domain.lookupdomain.LookupDomain">LookupDomain</span>)
        </code>



<a href="#adviser.examples.webapi.weather.domain.WeatherDomain" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Domain for the Weather API.</p>

<p><strong>Attributes:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>last_results</code></td>
        <td><code>List[dict]</code></td>
        <td><p>Current results which the user might request info about</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WeatherDomain</span><span class="p">(</span><span class="n">LookupDomain</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Domain for the Weather API.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        last_results (List[dict]): Current results which the user might request info about</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;WeatherAPI&#39;</span><span class="p">,</span> <span class="s1">&#39;Weather&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
        <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">        Args:</span>
<span class="sd">            constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                                If empty, all entities in the database will be returned.</span>
<span class="sd">            requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                        system requestable slots and the primary key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;location&#39;</span> <span class="ow">in</span> <span class="n">constraints</span> <span class="ow">and</span> <span class="s1">&#39;date&#39;</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>

            <span class="n">forecast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">forecast</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[]</span>

            <span class="n">temperature</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.0f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">forecast</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;temp&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="mf">273.15</span><span class="p">))</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">forecast</span><span class="p">[</span><span class="s1">&#39;weather&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>

            <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;artificial_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">)),</span>
                <span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
                <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="kc">True</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">):</span>
                <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="n">result_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cleaned_result_dict</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">cleaned_result_dict</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">            specified entity.</span>

<span class="sd">        Args:</span>
<span class="sd">            entity_id (str): primary key value of the entity</span>
<span class="sd">            requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)]]</span>

    <span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns a list of all default Inform slots. &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">        Args:</span>
<span class="sd">            slot (str): name of the slot</span>

<span class="sd">        Returns:</span>
<span class="sd">            a list of strings, each string representing one possible value for</span>
<span class="sd">            the specified slot.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;all slots in this domain do not have a fixed set of &#39;</span>
                            <span class="s1">&#39;values, so this method should never be called&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>

    <span class="k">def</span> <span class="nf">_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;if location is None:</span>
<span class="sd">            location = &#39;Stuttgart&#39;</span>
<span class="sd">        if date is None:</span>
<span class="sd">            date = datetime.now()&quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;http://api.openweathermap.org/data/2.5/forecast?q=</span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s1">&amp;APPID=</span><span class="si">{</span><span class="n">API_KEY</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">forecasts</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())[</span><span class="s1">&#39;list&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_closest</span><span class="p">(</span><span class="n">forecasts</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_find_closest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forecasts</span><span class="p">,</span> <span class="n">preferred_time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; From a list of forecasts, find the one which is closest to the specified time&quot;&quot;&quot;</span>
        <span class="n">closest_forecast</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">closest_difference</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">forecast</span> <span class="ow">in</span> <span class="n">forecasts</span><span class="p">:</span>
            <span class="n">forecast_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">forecast</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]))</span>
            <span class="n">time_difference</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">preferred_time</span> <span class="o">-</span> <span class="n">forecast_time</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">closest_forecast</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">time_difference</span> <span class="o">&lt;</span> <span class="n">closest_difference</span><span class="p">:</span>
                <span class="n">closest_forecast</span> <span class="o">=</span> <span class="n">forecast</span>
                <span class="n">closest_difference</span> <span class="o">=</span> <span class="n">time_difference</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">closest_forecast</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;weather&#39;</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">LookupDomain</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;WeatherAPI&#39;</span><span class="p">,</span> <span class="s1">&#39;Weather&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.find_entities" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">requested_slots</span><span class="o">=&lt;</span><span class="n">tuple_iterator</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fedd6581fd0</span><span class="o">&gt;</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_entities" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all entities from the data backend that meet the constraints.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>constraints</code></td>
        <td><code>dict</code></td>
        <td><p>Slot-value mapping of constraints.
                If empty, all entities in the database will be returned.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>requested_slots</code></td>
        <td><code>Iterable</code></td>
        <td><p>list of slots that should be returned in addition to the
                        system requestable slots and the primary key</p></td>
        <td><code>&lt;tuple_iterator object at 0x7fedd6581fd0&gt;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(())):</span>
    <span class="sd">&quot;&quot;&quot; Returns all entities from the data backend that meet the constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        constraints (dict): Slot-value mapping of constraints.</span>
<span class="sd">                            If empty, all entities in the database will be returned.</span>
<span class="sd">        requested_slots (Iterable): list of slots that should be returned in addition to the</span>
<span class="sd">                                    system requestable slots and the primary key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;location&#39;</span> <span class="ow">in</span> <span class="n">constraints</span> <span class="ow">and</span> <span class="s1">&#39;date&#39;</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>

        <span class="n">forecast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query</span><span class="p">(</span><span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">forecast</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">temperature</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.0f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">forecast</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;temp&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="mf">273.15</span><span class="p">))</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">forecast</span><span class="p">[</span><span class="s1">&#39;weather&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>

        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;artificial_id&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">)),</span>
            <span class="s1">&#39;temperature&#39;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
            <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">constraints</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="kc">True</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">):</span>
            <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">slot</span><span class="p">:</span> <span class="n">result_dict</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">requested_slots</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cleaned_result_dict</span> <span class="o">=</span> <span class="n">result_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cleaned_result_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">cleaned_result_dict</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.find_info_about_entity" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the values (stored in the data backend) of the specified slots for the
    specified entity.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>entity_id</code></td>
        <td><code>str</code></td>
        <td><p>primary key value of the entity</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>requested_slots</code></td>
        <td><code>dict</code></td>
        <td><p>slot-value mapping of constraints</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">find_info_about_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">requested_slots</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Returns the values (stored in the data backend) of the specified slots for the</span>
<span class="sd">        specified entity.</span>

<span class="sd">    Args:</span>
<span class="sd">        entity_id (str): primary key value of the entity</span>
<span class="sd">        requested_slots (dict): slot-value mapping of constraints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_results</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">entity_id</span><span class="p">)]]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_default_inform_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_default_inform_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all default Inform slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_default_inform_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all default Inform slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_informable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all informable slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_informable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all informable slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_keyword" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_keyword" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;weather&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_mandatory_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all mandatory slots. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_mandatory_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all mandatory slots. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_possible_values" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns all possible values for an informable slot</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>slot</code></td>
        <td><code>str</code></td>
        <td><p>name of the slot</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>a list of strings, each string representing one possible value for
the specified slot.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_possible_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns all possible values for an informable slot</span>

<span class="sd">    Args:</span>
<span class="sd">        slot (str): name of the slot</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of strings, each string representing one possible value for</span>
<span class="sd">        the specified slot.</span>
<span class="sd">     &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s1">&#39;all slots in this domain do not have a fixed set of &#39;</span>
                        <span class="s1">&#39;values, so this method should never be called&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_primary_key" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns the slot name that will be used as the 'name' of an entry </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_primary_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Returns the slot name that will be used as the &#39;name&#39; of an entry &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;artificial_id&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the user. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the user. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.domain.WeatherDomain.get_system_requestable_slots" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">

      <p>Returns a list of all slots requestable by the system. </p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/domain.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_system_requestable_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Returns a list of all slots requestable by the system. &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.weather.nlg" class="doc doc-heading">
        <code>nlg</code>



<a href="#adviser.examples.webapi.weather.nlg" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.weather.nlg.WeatherNLG" class="doc doc-heading">
        <code>
WeatherNLG            (<span title="services.service.Service">Service</span>)
        </code>



<a href="#adviser.examples.webapi.weather.nlg.WeatherNLG" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Simple NLG for the weather domain</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WeatherNLG</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple NLG for the weather domain&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">DiasysLogger</span><span class="p">()):</span>
        <span class="c1"># only calls super class&#39; constructor</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">WeatherNLG</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sys_act&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sys_utterance&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">generate_system_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sys_act</span><span class="p">:</span> <span class="n">SysAct</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sys_utterance</span><span class="o">=</span><span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Main function for generating and publishing the system utterance</span>

<span class="sd">        Args:</span>
<span class="sd">            sys_act: the system act for which to create a natural language realisation</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict with &quot;sys_utterance&quot; as key and the system utterance as value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">sys_act</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SysActionType</span><span class="o">.</span><span class="n">Welcome</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="s1">&#39;Hi! What do you want to know about the weather?&#39;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SysActionType</span><span class="o">.</span><span class="n">Bad</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="s1">&#39;Sorry, I could not understand you.&#39;</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SysActionType</span><span class="o">.</span><span class="n">Bye</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="s1">&#39;Thank you, good bye&#39;</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SysActionType</span><span class="o">.</span><span class="n">Request</span><span class="p">:</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys_act</span><span class="o">.</span><span class="n">slot_values</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;date&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="s1">&#39;For which day are you looking for the weather?&#39;</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">slot</span> <span class="o">==</span> <span class="s1">&#39;location&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="s1">&#39;Which city are you at?&#39;</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;Only the date and the location can be requested&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">slot_values</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">slot_values</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">date_str</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;on %B </span><span class="si">%-d</span><span class="s1"> at %-I %p&#39;</span><span class="p">)</span>
            <span class="n">temperature</span> <span class="o">=</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">slot_values</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">sys_act</span><span class="o">.</span><span class="n">slot_values</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;sys_utterance&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;The weather in </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">temperature</span><span class="si">}</span><span class="s1"> degrees celsius with </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.nlg.WeatherNLG.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">DiasysLogger</span><span class="p">()):</span>
    <span class="c1"># only calls super class&#39; constructor</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WeatherNLG</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.nlg.WeatherNLG.generate_system_utterance" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">generate_system_utterance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.nlg.WeatherNLG.generate_system_utterance" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlg.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h4 id="adviser.examples.webapi.weather.nlu" class="doc doc-heading">
        <code>nlu</code>



<a href="#adviser.examples.webapi.weather.nlu" class="headerlink" title="Permanent link">&para;</a></h4>

    <div class="doc doc-contents ">




  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="adviser.examples.webapi.weather.nlu.WEATHER_DATE_TODAY_REGEXES" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">WEATHER_DATE_TODAY_REGEXES</span></code>


<a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TODAY_REGEXES" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="adviser.examples.webapi.weather.nlu.WEATHER_DATE_TOMORROW_REGEXES" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">WEATHER_DATE_TOMORROW_REGEXES</span></code>


<a href="#adviser.examples.webapi.weather.nlu.WEATHER_DATE_TOMORROW_REGEXES" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="adviser.examples.webapi.weather.nlu.WEATHER_LOCATION_REGEXES" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">WEATHER_LOCATION_REGEXES</span></code>


<a href="#adviser.examples.webapi.weather.nlu.WEATHER_LOCATION_REGEXES" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="adviser.examples.webapi.weather.nlu.WeatherNLU" class="doc doc-heading">
        <code>
WeatherNLU            (<span title="services.service.Service">Service</span>)
        </code>



<a href="#adviser.examples.webapi.weather.nlu.WeatherNLU" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Very simple NLU for the weather domain.</p>

        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">WeatherNLU</span><span class="p">(</span><span class="n">Service</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Very simple NLU for the weather domain.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">DiasysLogger</span><span class="p">()):</span>
        <span class="c1"># only calls super class&#39; constructor</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">WeatherNLU</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

    <span class="nd">@PublishSubscribe</span><span class="p">(</span><span class="n">sub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_utterance&quot;</span><span class="p">],</span> <span class="n">pub_topics</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user_acts&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">extract_user_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_utterance</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user_acts</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">UserAct</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Main function for detecting and publishing user acts.</span>

<span class="sd">        Args:</span>
<span class="sd">            user_utterance: the user input string</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict with key &#39;user_acts&#39; and list of user acts as value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_acts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_utterance</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">user_utterance</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_utterance</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">bye</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;bye&#39;</span><span class="p">,</span> <span class="s1">&#39;goodbye&#39;</span><span class="p">,</span> <span class="s1">&#39;byebye&#39;</span><span class="p">,</span> <span class="s1">&#39;seeyou&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">user_utterance</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">bye</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Bye</span><span class="p">)]}</span>

        <span class="c1"># check weather today</span>
        <span class="k">for</span> <span class="n">regex</span> <span class="ow">in</span> <span class="n">WEATHER_DATE_TODAY_REGEXES</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_acts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">regex</span> <span class="ow">in</span> <span class="n">WEATHER_DATE_TOMORROW_REGEXES</span><span class="p">:</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                    <span class="n">tomorrow</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">tomorrow</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">tomorrow</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">tomorrow</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
                    <span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">date</span><span class="p">))</span>
                    <span class="k">break</span>
        <span class="k">for</span> <span class="n">regex</span> <span class="ow">in</span> <span class="n">WEATHER_LOCATION_REGEXES</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">user_acts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UserAct</span><span class="p">(</span><span class="n">user_utterance</span><span class="p">,</span> <span class="n">UserActionType</span><span class="o">.</span><span class="n">Inform</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">dialog_turn</span><span class="p">(</span><span class="s2">&quot;User Actions: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_acts</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_acts&#39;</span><span class="p">:</span> <span class="n">user_acts</span><span class="p">}</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.nlu.WeatherNLU.__init__" class="doc doc-heading">
<code class="codehilite language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=&lt;</span><span class="n">DiasysLogger</span> <span class="n">adviser</span> <span class="p">(</span><span class="n">NOTSET</span><span class="p">)</span><span class="o">&gt;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.__init__" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">DiasysLogger</span><span class="p">()):</span>
    <span class="c1"># only calls super class&#39; constructor</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WeatherNLU</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">debug_logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="adviser.examples.webapi.weather.nlu.WeatherNLU.extract_user_acts" class="doc doc-heading">
<code class="codehilite language-python"><span class="n">extract_user_acts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#adviser.examples.webapi.weather.nlu.WeatherNLU.extract_user_acts" class="headerlink" title="Permanent link">&para;</a></h6>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>adviser/examples/webapi/weather/nlu.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">delegate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">func_inst</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">callargs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">callargs</span><span class="p">:</span>    <span class="c1"># remove self when in *args, because already known to function</span>
        <span class="n">callargs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">callargs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># fix! (user could have multiple &quot;/&quot; characters in topic - only use last one )</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">{</span><span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">res</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="n">res</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]:</span> <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">func_inst</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">:</span>
        <span class="c1"># not a publisher, just normal function</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">socket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish_sockets</span><span class="p">[</span><span class="n">func_inst</span><span class="p">]</span>
    <span class="n">domain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_domain_name</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="ow">and</span> <span class="n">result</span><span class="p">:</span>
        <span class="c1"># publish messages</span>
        <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">pub_topics</span><span class="p">:</span>
        <span class="c1"># for topic in result: # NOTE publish any returned value in dict with it&#39;s key as topic</span>
            <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">domain</span> <span class="o">=</span> <span class="n">domain</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span>
                <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">domain</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="k">if</span> <span class="n">topic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">:</span>
                    <span class="n">topic_domain_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pub_topic_domains</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span> <span class="k">else</span> <span class="n">topic</span>
                <span class="n">_send_msg</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">topic_domain_str</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;- (DS): sent message from </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> to topic </span><span class="si">{</span><span class="n">topic_domain_str</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="n">topic</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../services/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Services" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Services
            </div>
          </div>
        </a>
      
      
        
        <a href="../utils/" class="md-footer__link md-footer__link--next" aria-label="Next: Utils" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Utils
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>